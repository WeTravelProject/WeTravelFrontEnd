{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{memo,useState,useEffect}from'react';import'./Register.scss';import Login from'../../pages/Login';import ForgotPassword from'../../pages/ForgotPassword';import Camping from'../../images/camping.png';import Hiring from'../../images/hiring3.png';import{HiOutlineMail,HiOutlineArrowNarrowRight}from'react-icons/hi';import Checkbox from'@mui/material/Checkbox';import{Link,useNavigate}from'react-router-dom';import{vietnamese,english}from'../../Languages/Register';import axios from'axios';import LoadingDialog from'../../Layout/LoadingDialog';import BackgroundAnimater from'../../Layout/BackgroundAnimater';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(_ref){var languageSelected=_ref.languageSelected,role=_ref.role,setProgress=_ref.setProgress;var languageList=languageSelected==='EN'?english:vietnamese;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showLoading=_useState2[0],setShowLoading=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emailRegister=_useState4[0],setEmailRegister=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showLogin=_useState6[0],setShowLogin=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showForgotPassword=_useState8[0],setShowForgotPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),agree=_useState10[0],setAgree=_useState10[1];var handleClickNext=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var email,roleId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(emailRegister)&&agree)){_context.next=10;break;}setShowLoading(true);setProgress(70);email=emailRegister;roleId=role;// call api from server\n_context.next=7;return axios.post('http://localhost:8081/wetravel/verify',null,{params:{email:email,roleId:roleId}}).then(function(){navigate(\"/checkmail?email=\".concat(emailRegister,\"&role=\").concat(role));}).catch(function(){setShowLoading(false);toast.warning('Email da duoc dang ky');});case 7:setProgress(100);_context.next=11;break;case 10:if(!agree){toast.error(languageList[7]);}else{toast.error(languageList[5]);}case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleClickNext(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"signup-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-input container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-animater-register\",children:/*#__PURE__*/_jsx(BackgroundAnimater,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-box-email container\",children:[/*#__PURE__*/_jsx(HiOutlineMail,{className:\"email-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"field input-mail\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"email\",value:emailRegister,className:\"input-mail\",onChange:function onChange(e){return setEmailRegister(e.target.value);},type:\"text\",required:true,id:\"text\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",title:\"Email\",\"data-title\":\"Email\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-remember\",children:[/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(){return setAgree(!agree);},id:\"remember\",sx:{'& .MuiSvgIcon-root':{fontSize:20}}}),/*#__PURE__*/_jsxs(\"label\",{className:\"text-term\",children:[languageList[0],\" \",/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-dark\",children:languageList[1]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"group-submit\",children:[/*#__PURE__*/_jsxs(\"label\",{onClick:handleClickNext,className:\"btn-next-register text-decoration-none\",children:[languageList[2],\" \",/*#__PURE__*/_jsx(HiOutlineArrowNarrowRight,{className:\"space-left\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ask-to-login\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-block text-center\",children:languageList[3]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-block text-decoration-none text text-center text-blue\",onClick:function onClick(){return setShowLogin(true);},children:languageList[4]})]})]})]})}),/*#__PURE__*/_jsx(\"img\",{className:\"image-register\",src:role==3?Camping:Hiring})]}),(showLogin||showForgotPassword||showLoading)&&/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-popup\",onClick:function onClick(){setShowForgotPassword(false);setShowLogin(false);}}),showLoading?/*#__PURE__*/_jsx(LoadingDialog,{}):showForgotPassword?/*#__PURE__*/_jsx(ForgotPassword,{setProgress:setProgress,setShowLoading:setShowLoading,languageSelected:languageSelected}):/*#__PURE__*/_jsx(Login,{setProgress:setProgress,setShowLoading:setShowLoading,languageSelected:languageSelected,handleForgotPassword:setShowForgotPassword})]})]});}export default/*#__PURE__*/memo(Register);","map":{"version":3,"names":["React","memo","useState","useEffect","Login","ForgotPassword","Camping","Hiring","HiOutlineMail","HiOutlineArrowNarrowRight","Checkbox","Link","useNavigate","vietnamese","english","axios","LoadingDialog","BackgroundAnimater","toast","Register","languageSelected","role","setProgress","languageList","navigate","showLoading","setShowLoading","emailRegister","setEmailRegister","showLogin","setShowLogin","showForgotPassword","setShowForgotPassword","agree","setAgree","handleClickNext","test","email","roleId","post","params","then","catch","warning","error","e","target","value","fontSize"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/pages/Register/index.js"],"sourcesContent":["import React, { memo, useState, useEffect } from 'react'\r\nimport './Register.scss'\r\nimport Login from '../../pages/Login'\r\nimport ForgotPassword from '../../pages/ForgotPassword';\r\nimport Camping from '../../images/camping.png'\r\nimport Hiring from '../../images/hiring3.png'\r\nimport { HiOutlineMail, HiOutlineArrowNarrowRight } from 'react-icons/hi'\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport { Link, useNavigate } from 'react-router-dom'\r\nimport { vietnamese, english } from '../../Languages/Register';\r\nimport axios from 'axios';\r\nimport LoadingDialog from '../../Layout/LoadingDialog'\r\nimport BackgroundAnimater from '../../Layout/BackgroundAnimater';\r\nimport { toast } from 'react-toastify'\r\n\r\nfunction Register({ languageSelected, role, setProgress }) {\r\n    let languageList = (languageSelected === 'EN' ? english : vietnamese)\r\n\r\n    const navigate = useNavigate();\r\n    const [showLoading, setShowLoading] = useState(false)\r\n    const [emailRegister, setEmailRegister] = useState('');\r\n    const [showLogin, setShowLogin] = useState(false);\r\n    const [showForgotPassword, setShowForgotPassword] = useState(false);\r\n    const [agree, setAgree] = useState(false);\r\n\r\n    const handleClickNext = async () => {\r\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(emailRegister) && agree) {\r\n            setShowLoading(true);\r\n            setProgress(70)\r\n            let email = emailRegister\r\n            let roleId = role\r\n            // call api from server\r\n            await axios.post('http://localhost:8081/wetravel/verify', null, {\r\n                params: {\r\n                    email,\r\n                    roleId\r\n                }\r\n            }).then(() => {\r\n                navigate(`/checkmail?email=${emailRegister}&role=${role}`)\r\n            }).catch(() => {\r\n                setShowLoading(false);\r\n                toast.warning('Email da duoc dang ky')\r\n            })\r\n            setProgress(100)\r\n\r\n        }\r\n        else if (!agree) {\r\n            toast.error(languageList[7])\r\n        }\r\n        else {\r\n            toast.error(languageList[5])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='signup-container'>\r\n\r\n            <div className='input-group container'>\r\n                <div className='cn'>\r\n                    <div className='content-input container'>\r\n                        <div className='background-animater-register'><BackgroundAnimater /></div>\r\n                        <div className='text-box-email container'>\r\n                            <HiOutlineMail className='email-icon' />\r\n                            <div className=\"field input-mail\">\r\n                                <input name='email' value={emailRegister} className='input-mail' onChange={(e) => setEmailRegister(e.target.value)} type=\"text\" required id=\"text\" />\r\n                                <label htmlFor=\"text\" title=\"Email\" data-title=\"Email\"></label>\r\n                            </div>\r\n                        </div>\r\n                        <div className='checkbox-remember'>\r\n                            <Checkbox\r\n                                onChange={() => setAgree(!agree)}\r\n                                id='remember'\r\n                                sx={{ '& .MuiSvgIcon-root': { fontSize: 20 } }} />\r\n                            <label className='text-term'>{languageList[0]} <Link to='/' className='text-dark'>{languageList[1]}</Link></label>\r\n                        </div>\r\n                        <div className='group-submit'>\r\n                            <label onClick={handleClickNext} className='btn-next-register text-decoration-none'>{languageList[2]} <HiOutlineArrowNarrowRight className='space-left' /></label>\r\n                            <div className='ask-to-login'>\r\n                                <div className='d-block text-center'>{languageList[3]}</div>\r\n                                <div className='d-block text-decoration-none text text-center text-blue' onClick={() => setShowLogin(true)}>{languageList[4]}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <img className='image-register' src={role == 3 ? Camping : Hiring} />\r\n            </div>\r\n\r\n            {(showLogin || showForgotPassword || showLoading) && <div className='popup'>\r\n                <div className='bg-popup' onClick={() => {\r\n                    setShowForgotPassword(false)\r\n                    setShowLogin(false)\r\n                }} />\r\n                {showLoading ? <LoadingDialog /> :\r\n                    showForgotPassword ? <ForgotPassword setProgress={setProgress} setShowLoading={setShowLoading} languageSelected={languageSelected} /> :\r\n                        <Login setProgress={setProgress} setShowLoading={setShowLoading} languageSelected={languageSelected} handleForgotPassword={setShowForgotPassword} />\r\n                }\r\n            </div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default memo(Register)"],"mappings":"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"},"metadata":{},"sourceType":"module"}