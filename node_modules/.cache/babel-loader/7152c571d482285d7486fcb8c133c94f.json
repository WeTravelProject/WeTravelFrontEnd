{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import usePlacesAutocomplete,{getGeocode,getLatLng}from'use-places-autocomplete';import ComboBox from\"react-responsive-combo-box\";import\"react-responsive-combo-box/dist/index.css\";import'@reach/combobox/styles.css';import{GoogleMap,useJsApiLoader,Marker}from'@react-google-maps/api';import{memo,useState,useCallback,useEffect}from'react';import'./GoogleMapLayout.scss';import{english,vietnamese}from'../../Languages/MoreInformationTour';import SearchMap from'../../images/map-search.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GoogleMapLayout(_ref){var languageSelected=_ref.languageSelected,style=_ref.style,tour=_ref.tour,setTour=_ref.setTour,hadOnclick=_ref.hadOnclick,hadSearch=_ref.hadSearch,clickMarker=_ref.clickMarker;var txtSearch=languageSelected==='EN'?english.txtSearchAddress:vietnamese.txtSearchAddress;var center={lat:tour.latitude,lng:tour.longitude};var _useJsApiLoader=useJsApiLoader({id:'google-map-script',googleMapsApiKey:\"AIzaSyBZDeLRK0328QFPaSs-OCk03bMUOHXaMys\",libraries:[\"places\"]}),isLoaded=_useJsApiLoader.isLoaded;var handleClickMap=function handleClickMap(latLng){setTour(_objectSpread(_objectSpread({},tour),{},{latitude:latLng.lat(),longitude:latLng.lng()}));};var _useState=useState(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var onLoad=useCallback(function callback(map){var bounds=new window.google.maps.LatLngBounds(center);map.fitBounds(bounds);setMap(map);},[]);var onUnmount=useCallback(function callback(map){setMap(null);},[]);return isLoaded&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:style,center:center,zoom:15,onLoad:onLoad,onUnmount:onUnmount,onClick:hadOnclick&&function(e){return handleClickMap(e.latLng);},children:/*#__PURE__*/_jsx(Marker,{position:{lat:tour.latitude,lng:tour.longitude},onClick:clickMarker})}),hadSearch&&/*#__PURE__*/_jsx(PlacesAutoComplete,{setTour:setTour,tour:tour,txtSearch:txtSearch})]});}var PlacesAutoComplete=function PlacesAutoComplete(_ref2){var setTour=_ref2.setTour,tour=_ref2.tour,txtSearch=_ref2.txtSearch;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),focus=_useState4[0],setFocus=_useState4[1];var optionFake=[];var _usePlacesAutocomplet=usePlacesAutocomplete(),ready=_usePlacesAutocomplet.ready,value=_usePlacesAutocomplet.value,setValue=_usePlacesAutocomplet.setValue,_usePlacesAutocomplet2=_usePlacesAutocomplet.suggestions,status=_usePlacesAutocomplet2.status,data=_usePlacesAutocomplet2.data,clearSuggestions=_usePlacesAutocomplet.clearSuggestions;var handleSelect=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(address){var results,_yield$getLatLng,lat,lng;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(address);setValue(address,false);clearSuggestions();_context.next=5;return getGeocode({address:address});case 5:results=_context.sent;_context.next=8;return getLatLng(results[0]);case 8:_yield$getLatLng=_context.sent;lat=_yield$getLatLng.lat;lng=_yield$getLatLng.lng;setTour(_objectSpread(_objectSpread({},tour),{},{latitude:lat}));setTour(_objectSpread(_objectSpread({},tour),{},{longitude:lng}));case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleSelect(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){data.map(function(_ref4){var description=_ref4.description;return optionFake.push(description);});console.log(optionFake);},[data,status]);return/*#__PURE__*/_jsx(\"div\",{className:\"combobox-maps\",children:focus?/*#__PURE__*/_jsx(ComboBox,{className:\"combobox-inner\",onChange:function onChange(e){return setValue(e.target.value);},value:value,placeholder:txtSearch,onSelect:function onSelect(e){return handleSelect(e);},options:optionFake,renderOptions:function renderOptions(option){return/*#__PURE__*/_jsx(\"div\",{value:option,children:option});},onBlur:value.length==0&&function(){return setFocus(!focus);}}):/*#__PURE__*/_jsx(\"div\",{className:\"search-map-icon-back\",children:/*#__PURE__*/_jsx(\"img\",{src:SearchMap,onClick:function onClick(){return setFocus(!focus);}})})});// <Combobox onSelect={handleSelect} className='combobox-maps'>\n//     {focus ? <><ComboboxInput value={value} onChange={e => setValue(e.target.value)} disabled={!ready}\n//         className='combobox-input-maps' placeholder={txtSearch} onBlur={value.length == 0 && (() => setFocus(!focus))} />\n//         <ComboboxPopover>\n//             <ComboboxList>\n//                 {status === 'OK' && data.map(({ place_id, description }) => (\n//                     <ComboboxOption key={place_id} value={description} />\n//                 ))\n//                 }\n//             </ComboboxList>\n//         </ComboboxPopover>\n//     </>\n//         :\n//         <div className='search-map-icon-back'>\n//             <img src={SearchMap} onClick={() => setFocus(!focus)} />\n//         </div>\n//     }\n// </Combobox>\n};export default/*#__PURE__*/memo(GoogleMapLayout);","map":{"version":3,"names":["usePlacesAutocomplete","getGeocode","getLatLng","ComboBox","GoogleMap","useJsApiLoader","Marker","memo","useState","useCallback","useEffect","english","vietnamese","SearchMap","GoogleMapLayout","languageSelected","style","tour","setTour","hadOnclick","hadSearch","clickMarker","txtSearch","txtSearchAddress","center","lat","latitude","lng","longitude","id","googleMapsApiKey","libraries","isLoaded","handleClickMap","latLng","map","setMap","onLoad","callback","bounds","window","google","maps","LatLngBounds","fitBounds","onUnmount","e","PlacesAutoComplete","focus","setFocus","optionFake","ready","value","setValue","suggestions","status","data","clearSuggestions","handleSelect","address","console","log","results","description","push","target","option","length"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/Layout/GoogleMapLayout/index.js"],"sourcesContent":["import usePlacesAutocomplete, { getGeocode, getLatLng } from 'use-places-autocomplete'\r\nimport ComboBox from \"react-responsive-combo-box\";\r\nimport \"react-responsive-combo-box/dist/index.css\";\r\nimport '@reach/combobox/styles.css'\r\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\r\nimport { memo, useState, useCallback, useEffect } from 'react'\r\nimport './GoogleMapLayout.scss'\r\nimport { english, vietnamese } from '../../Languages/MoreInformationTour';\r\nimport SearchMap from '../../images/map-search.png'\r\n\r\nfunction GoogleMapLayout({ languageSelected, style, tour, setTour, hadOnclick, hadSearch, clickMarker }) {\r\n    const txtSearch = (languageSelected === 'EN' ? english.txtSearchAddress : vietnamese.txtSearchAddress)\r\n\r\n    let center = {\r\n        lat: tour.latitude,\r\n        lng: tour.longitude\r\n    };\r\n\r\n    const { isLoaded } = useJsApiLoader({\r\n        id: 'google-map-script',\r\n        googleMapsApiKey: \"AIzaSyBZDeLRK0328QFPaSs-OCk03bMUOHXaMys\",\r\n        libraries: [\"places\"]\r\n    })\r\n\r\n    const handleClickMap = ((latLng) => {\r\n        setTour({ ...tour, latitude: latLng.lat(), longitude: latLng.lng() })\r\n    })\r\n\r\n    const [map, setMap] = useState(null)\r\n\r\n    const onLoad = useCallback(function callback(map) {\r\n        const bounds = new window.google.maps.LatLngBounds(center);\r\n        map.fitBounds(bounds);\r\n        setMap(map)\r\n    }, [])\r\n\r\n    const onUnmount = useCallback(function callback(map) {\r\n        setMap(null)\r\n    }, [])\r\n\r\n    return (isLoaded &&\r\n        <div>\r\n            <GoogleMap\r\n                mapContainerStyle={style}\r\n                center={center}\r\n                zoom={15}\r\n                onLoad={onLoad}\r\n                onUnmount={onUnmount}\r\n                onClick={hadOnclick && ((e) => handleClickMap(e.latLng))}\r\n            >\r\n                <Marker position={{\r\n                    lat: tour.latitude,\r\n                    lng: tour.longitude\r\n                }} onClick={clickMarker} />\r\n            </GoogleMap>\r\n            {hadSearch &&\r\n                <PlacesAutoComplete setTour={setTour} tour={tour} txtSearch={txtSearch} />\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nconst PlacesAutoComplete = ({ setTour, tour, txtSearch }) => {\r\n    const [focus, setFocus] = useState(false)\r\n\r\n    const optionFake = []\r\n\r\n    const {\r\n        ready,\r\n        value,\r\n        setValue,\r\n        suggestions: { status, data },\r\n        clearSuggestions\r\n    } = usePlacesAutocomplete()\r\n\r\n    const handleSelect = (async (address) => {\r\n        console.log(address)\r\n        setValue(address, false)\r\n        clearSuggestions()\r\n\r\n        const results = await getGeocode({ address });\r\n        const { lat, lng } = await getLatLng(results[0])\r\n        setTour({ ...tour, latitude: lat })\r\n        setTour({ ...tour, longitude: lng })\r\n    })\r\n\r\n    useEffect(() => {\r\n        data.map(({ description }) => optionFake.push(description))\r\n        console.log(optionFake)\r\n    }, [data, status])\r\n\r\n    return (\r\n        <div className='combobox-maps'>\r\n            {focus ? <ComboBox className='combobox-inner' onChange={e => setValue(e.target.value)} value={value} placeholder={txtSearch} onSelect={(e) => handleSelect(e)}\r\n                options={optionFake} renderOptions={(option) => (\r\n                    <div value={option}>{option}</div>\r\n                )} onBlur={value.length == 0 && (() => setFocus(!focus))} /> :\r\n                <div className='search-map-icon-back'>\r\n                    <img src={SearchMap} onClick={() => setFocus(!focus)} />\r\n                </div>}\r\n        </div>\r\n    )\r\n\r\n\r\n    // <Combobox onSelect={handleSelect} className='combobox-maps'>\r\n    //     {focus ? <><ComboboxInput value={value} onChange={e => setValue(e.target.value)} disabled={!ready}\r\n    //         className='combobox-input-maps' placeholder={txtSearch} onBlur={value.length == 0 && (() => setFocus(!focus))} />\r\n    //         <ComboboxPopover>\r\n    //             <ComboboxList>\r\n    //                 {status === 'OK' && data.map(({ place_id, description }) => (\r\n    //                     <ComboboxOption key={place_id} value={description} />\r\n    //                 ))\r\n    //                 }\r\n    //             </ComboboxList>\r\n    //         </ComboboxPopover>\r\n    //     </>\r\n    //         :\r\n    //         <div className='search-map-icon-back'>\r\n    //             <img src={SearchMap} onClick={() => setFocus(!focus)} />\r\n    //         </div>\r\n    //     }\r\n\r\n    // </Combobox>\r\n}\r\n\r\nexport default memo(GoogleMapLayout)"],"mappings":"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"},"metadata":{},"sourceType":"module"}