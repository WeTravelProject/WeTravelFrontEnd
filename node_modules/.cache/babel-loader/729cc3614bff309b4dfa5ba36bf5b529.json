{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\Hoc ReactJS\\\\wetravelfrontend\\\\src\\\\components\\\\Layout\\\\RegisterInformationServiceLayout\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { vietnamese, english } from \"../../Languages/OptionInputInformationService\";\nimport { useState, memo, useEffect, useRef, useLayoutEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport './RegisterInformationServiceLayout.scss';\nimport RegisterInformationRooms from '../../pages/RegisterInformationRooms';\nimport RegisterInformationAccomodation from '../../pages/RegisterInformationAccomodation';\nimport RegisterUtilitiesAndServices from \"../../pages/RegisterUtilitiesAndServices\";\nimport RegisterPhotos from \"../../pages/RegisterPhotos\";\nimport RegisterInformationEntertainment from \"../../pages/RegisterInformationEntertainment\";\nimport RegisterInformationRestaurant from \"../../pages/RegisterInformationRestaurant\";\nimport axios from \"axios\";\nimport LoadingDialog from \"../LoadingDialog\";\nimport { toast } from 'react-toastify';\nimport { UploadImage } from \"../../../firebase/UploadImage\";\nimport { API_PUT_UPDATE_SERVICEACCOMMODATION, API_SERVICE_DETAIL_INFORMATION, API_PUT_UPDATE_SERVICEENTERTAIMENT, API_PUT_UPDATE_SERVICERESTAURANT } from \"../../API\";\nimport { ref, listAll, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { storage } from \"../../../firebase/Upload\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction RegisterInformationServiceLayout(_ref) {\n  _s();\n\n  let {\n    setProgress,\n    languageSelected\n  } = _ref;\n  const navigate = useNavigate();\n  const [showLoading, setShowLoading] = useState(false);\n  const [moveToTop, setMoveToTop] = useState(true);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [moveToTop]);\n  let languageList = languageSelected === 'EN' ? english : vietnamese;\n  const categoryService = sessionStorage.getItem('index-service-selected');\n  const categoryDetailService = sessionStorage.getItem('detail-service');\n  const [selectedOption, setSelectedOption] = useState(0);\n  const [serviceData, setServiceData] = useState({\n    propertyName: '',\n    status: 1,\n    starRating: 1,\n    city: 'Hà Nội',\n    address: '',\n    website: '',\n    taxCode: '',\n    description: '',\n    fax: '',\n    phoneNumberContact: '',\n    emailContact: '',\n    numberOfFloors: 0,\n    timeOpen: '',\n    timeClose: '',\n    typeOfCuisine: [],\n    dateOpen: [],\n    childTiketPrice: 0,\n    adultTicketPrice: 0,\n    utilitiesInternet: [],\n    utilitiesFacilities: [],\n    utilitiesAccomodationService: [],\n    utilitiesBeautyRelaxation: [],\n    utilitiesFoodService: [],\n    utilitiesEntertainment: [],\n    utilitiesChildrenService: [],\n    utilitiesShopping: [],\n    utilitiesBusinessService: [],\n    utilitiesVehicle: [],\n    receptionHallPhoto: [],\n    outdoorPhoto: [],\n    otherPhoto: []\n  }); //form input rooms\n\n  const [roomsData, setRoomsData] = useState([{\n    showHide: true,\n    roomName: '',\n    roomType: 0,\n    numberOfRoom: 0,\n    bedType: 0,\n    numberOfPeopleRoom: 0,\n    roomSize: 0,\n    dailyPrice: 0,\n    holidayPrice: 0,\n    description: '',\n    bedRoomPhoto: [],\n    wcPhoto: [],\n    otherPhoto: []\n  }]); //on off star rating\n\n  const [onStarRating, setOnStarRating] = useState(true);\n  const [getDataComplete, setGetDataComplete] = useState(false);\n  let serviceId;\n  const queryString = window.location.search;\n  const urlParams = new URLSearchParams(queryString);\n  serviceId = urlParams.get('serviceId');\n\n  function setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomsData) {\n    serviceDataRaw.receptionHallPhoto = receptionHallPhoto;\n    serviceDataRaw.outdoorPhoto = outdoorPhoto;\n    serviceDataRaw.otherPhoto = otherPhoto;\n    setServiceData({ ...serviceDataRaw,\n      receptionHallPhoto: receptionHallPhoto,\n      outdoorPhoto: outdoorPhoto,\n      otherPhoto: otherPhoto\n    });\n    setRoomsData(roomsData);\n    setGetDataComplete(true);\n  }\n\n  useEffect(() => {\n    //Lấy dữ liệu service theo serviceId ở trên để edit\n    if (window.location.pathname.includes('/partner/edit-service')) {\n      console.log(serviceId);\n      axios.get(API_SERVICE_DETAIL_INFORMATION, {\n        params: {\n          serviceId: serviceId\n        }\n      }).then(res => {\n        console.log(res); //data of Accomodation Information\n\n        let serviceDataRaw = {\n          propertyName: '',\n          status: 1,\n          starRating: 1,\n          city: 'Hà Nội',\n          address: '',\n          website: '',\n          taxCode: '',\n          description: '',\n          fax: '',\n          phoneNumberContact: '',\n          emailContact: '',\n          numberOfFloors: 0,\n          timeOpen: '',\n          timeClose: '',\n          typeOfCuisine: [],\n          dateOpen: [],\n          childTiketPrice: 0,\n          adultTicketPrice: 0,\n          utilitiesInternet: [],\n          utilitiesFacilities: [],\n          utilitiesAccomodationService: [],\n          utilitiesBeautyRelaxation: [],\n          utilitiesFoodService: [],\n          utilitiesEntertainment: [],\n          utilitiesChildrenService: [],\n          utilitiesShopping: [],\n          utilitiesBusinessService: [],\n          utilitiesVehicle: [],\n          receptionHallPhoto: [],\n          outdoorPhoto: [],\n          otherPhoto: []\n        };\n        serviceDataRaw.propertyName = res.data.data.serviceDTO.serviceName;\n        serviceDataRaw.status = res.data.data.serviceDTO.status;\n        serviceDataRaw.city = res.data.data.serviceDTO.city;\n        serviceDataRaw.address = res.data.data.serviceDTO.address;\n        serviceDataRaw.website = res.data.data.serviceDTO.link;\n        serviceDataRaw.taxCode = res.data.data.serviceDTO.taxCode;\n        serviceDataRaw.description = res.data.data.description;\n        serviceDataRaw.phoneNumberContact = res.data.data.serviceDTO.phone;\n        serviceDataRaw.fax = res.data.data.serviceDTO.fax;\n        serviceDataRaw.emailContact = res.data.data.serviceDTO.email;\n\n        if (sessionStorage.getItem('index-service-selected') == 1) {\n          serviceDataRaw.starRating = res.data.data.rate;\n          serviceDataRaw.numberOfFloors = res.data.data.numberFloors;\n        } else if (sessionStorage.getItem('index-service-selected') == 2) {\n          serviceDataRaw.timeOpen = res.data.data.timeOpen;\n          serviceDataRaw.timeClose = res.data.data.timeClose;\n          serviceDataRaw.dateOpen = res.data.data.dowOpen.split(' ');\n          serviceDataRaw.childTiketPrice = res.data.data.priceTicketChildren;\n          serviceDataRaw.adultTicketPrice = res.data.data.priceTicketAdult;\n        } else {\n          serviceDataRaw.timeOpen = res.data.data.timeOpen;\n          serviceDataRaw.timeClose = res.data.data.timeClose;\n          serviceDataRaw.starRating = res.data.data.rate;\n          serviceDataRaw.typeOfCuisine = res.data.data.typeCuisineServiceDTOList;\n        }\n\n        const utilitiesListDTO = res.data.data.utilitiesServiceDTOList;\n        utilitiesListDTO.map(item => {\n          switch (item.utilitiesCategoryId) {\n            case 1:\n              serviceDataRaw.utilitiesInternet.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 1\n              });\n              break;\n\n            case 2:\n              serviceDataRaw.utilitiesFacilities.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 2\n              });\n              break;\n\n            case 3:\n              serviceDataRaw.utilitiesAccomodationService.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 3\n              });\n              break;\n\n            case 4:\n              serviceDataRaw.utilitiesBeautyRelaxation.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 4\n              });\n              break;\n\n            case 5:\n              serviceDataRaw.utilitiesFoodService.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 5\n              });\n              break;\n\n            case 6:\n              serviceDataRaw.utilitiesEntertainment.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 6\n              });\n              break;\n\n            case 7:\n              serviceDataRaw.utilitiesChildrenService.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 7\n              });\n              break;\n\n            case 8:\n              serviceDataRaw.utilitiesShopping.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 8\n              });\n              break;\n\n            case 9:\n              serviceDataRaw.utilitiesBusinessService.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 9\n              });\n              break;\n\n            case 10:\n              serviceDataRaw.utilitiesVehicle.push({\n                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\n                utilitiesCategoryId: 10\n              });\n              break;\n          }\n        });\n        let countAllImage = 0;\n        let countImageGeted = 0;\n        let receptionHallPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/receptionHallPhoto`);\n        let outdoorPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/outdoorPhoto`);\n        let otherPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/otherPhoto`);\n\n        if (sessionStorage.getItem('index-service-selected') == 2) {\n          receptionHallPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/receptionHallPhoto`);\n          outdoorPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/outdoorPhoto`);\n          otherPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/otherPhoto`);\n        } else if (sessionStorage.getItem('index-service-selected') == 3) {\n          receptionHallPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/receptionHallPhoto`);\n          outdoorPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/outdoorPhoto`);\n          otherPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/otherPhoto`);\n        } //console.log('chuan bi lay phong')\n\n\n        if (sessionStorage.getItem('index-service-selected') == 1) {\n          res.data.data.roomDTOList.map((room, index) => {\n            let countAllImageInRoom = 0;\n            let countImageInRoomGeted = 0;\n            let roomItem = {\n              showHide: false,\n              roomName: room.roomName,\n              roomType: room.roomType,\n              numberOfRoom: room.numberOfRoom,\n              bedType: room.bedType,\n              numberOfPeopleRoom: room.numberOfPeopleRoom,\n              roomSize: room.roomSize,\n              dailyPrice: room.dailyPrice,\n              holidayPrice: room.holidayPrice,\n              description: room.description,\n              bedRoomPhoto: [],\n              wcPhoto: [],\n              otherPhoto: []\n            };\n            const bedRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/bedRoomPhoto`);\n            const wcPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/wcPhoto`);\n            const otherRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/otherPhoto`);\n            listAll(bedRoomPhotoRef).then(res => {\n              countAllImage += res.items.length;\n              countAllImageInRoom += res.items.length;\n              res.items.forEach(itemRef => {\n                getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n                  axios({\n                    url: url,\n                    method: 'GET',\n                    responseType: 'blob'\n                  }).then(blob => {\n                    roomItem.bedRoomPhoto.push(blob.data);\n                    countImageInRoomGeted++;\n                    countImageGeted++;\n\n                    if (countImageInRoomGeted === countAllImageInRoom) {\n                      roomDataUpdate.push(roomItem);\n                    }\n\n                    if (countImageGeted === countAllImage) {\n                      setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                    }\n                  });\n                });\n              });\n            });\n            listAll(wcPhotoRef).then(res => {\n              countAllImage += res.items.length;\n              countAllImageInRoom += res.items.length;\n              res.items.forEach(itemRef => {\n                getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n                  axios({\n                    url: url,\n                    method: 'GET',\n                    responseType: 'blob'\n                  }).then(blob => {\n                    roomItem.wcPhoto.push(blob.data);\n                    countImageGeted++;\n                    countImageInRoomGeted++;\n\n                    if (countImageInRoomGeted === countAllImageInRoom) {\n                      roomDataUpdate.push(roomItem);\n                    }\n\n                    if (countImageGeted === countAllImage) {\n                      setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                    }\n                  });\n                });\n              });\n            });\n            listAll(otherRoomPhotoRef).then(res => {\n              countAllImage += res.items.length;\n              countAllImageInRoom += res.items.length;\n              res.items.forEach(itemRef => {\n                getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n                  axios({\n                    url: url,\n                    method: 'GET',\n                    responseType: 'blob'\n                  }).then(blob => {\n                    roomItem.otherPhoto.push(blob.data);\n                    countImageGeted++;\n                    countImageInRoomGeted++;\n\n                    if (countImageInRoomGeted === countAllImageInRoom) {\n                      roomDataUpdate.push(roomItem);\n                    }\n\n                    if (countImageGeted === countAllImage) {\n                      setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                    }\n                  });\n                });\n              });\n            });\n          });\n        }\n\n        let receptionHallPhoto = [];\n        let outdoorPhoto = [];\n        let otherPhoto = [];\n        let roomDataUpdate = []; //console.log(receptionHallPhotoRef)\n\n        listAll(receptionHallPhotoRef).then(res => {\n          countAllImage += res.items.length; //console.log('count image: ', countAllImage)\n\n          res.items.forEach(itemRef => {\n            getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n              console.log(url);\n              axios({\n                url: url,\n                method: 'GET',\n                responseType: 'blob'\n              }).then(blob => {\n                receptionHallPhoto.push(blob.data);\n                countImageGeted++;\n                console.log('check', countImageGeted);\n\n                if (countImageGeted === countAllImage) {\n                  console.log('xong');\n                  setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                }\n              });\n            });\n          });\n        });\n        listAll(outdoorPhotoRef).then(res => {\n          countAllImage += res.items.length;\n          res.items.forEach(itemRef => {\n            getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n              axios({\n                url: url,\n                method: 'GET',\n                responseType: 'blob'\n              }).then(blob => {\n                outdoorPhoto.push(blob.data);\n                countImageGeted++;\n\n                if (countImageGeted === countAllImage) {\n                  setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                }\n              });\n            });\n          });\n        });\n        listAll(otherPhotoRef).then(res => {\n          countAllImage += res.items.length;\n          res.items.forEach(itemRef => {\n            getDownloadURL(ref(storage, itemRef.fullPath)).then(url => {\n              axios({\n                url: url,\n                method: 'GET',\n                responseType: 'blob'\n              }).then(blob => {\n                otherPhoto.push(blob.data);\n                countImageGeted++;\n\n                if (countImageGeted === countAllImage) {\n                  setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate);\n                }\n              });\n            });\n          });\n        });\n      }).catch(() => {});\n    }\n  }, []); //\n\n  const count = useRef(-1);\n  const [leng, setLeng] = useState(0);\n  useEffect(() => {\n    if (leng === count.current) {\n      count.current = -1;\n      setLeng(0);\n      toast.success('Add service success');\n      navigate('/partner');\n    }\n  }, [leng]);\n\n  const handleClickSaveAndNext = () => {\n    setMoveToTop(pre => !pre);\n    setSelectedOption(pre => pre + 1);\n  }; //Submit accomodation\n\n\n  const checkInformationRooms = () => {\n    for (let i = 0; i < roomsData.length; i++) {\n      if (roomsData[i].numberOfRoom == 0 || roomsData[i].numberOfPeopleRoom == 0 || roomsData[i].roomSize == 0 || roomsData[i].bedRoomPhoto.length == 0 || roomsData[i].bedRoomPhoto.length == 0 || roomsData[i].wcPhoto.length == 0) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const UploadAccommodation = () => {\n    count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n\n    for (let j = 0; j < roomsData.length; j++) {\n      count.current += roomsData[j].bedRoomPhoto.length + roomsData[j].wcPhoto.length + roomsData[j].otherPhoto.length;\n    }\n\n    UploadImage(serviceData.receptionHallPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n    UploadImage(serviceData.outdoorPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n    UploadImage(serviceData.otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n\n    for (let i = 0; i < roomsData.length; i++) {\n      UploadImage(roomsData[i].bedRoomPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'bedRoomPhoto');\n      UploadImage(roomsData[i].wcPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'wcPhoto');\n      UploadImage(roomsData[i].otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'otherPhoto');\n    }\n  }; //Submit Accomodation Service\n\n\n  const handleClickSubmitAccomodation = async () => {\n    var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\n    var regexWebsite = new RegExp(regexWeb);\n\n    if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' || serviceData.emailContact === '' || serviceData.receptionHallPhoto.length == 0 || !checkInformationRooms) {\n      toast.warning(languageList[4]);\n    } else if (serviceData.propertyName !== '' && serviceData.address !== '' && (serviceData.website === '' || serviceData.website.match(regexWebsite)) && serviceData.taxCode !== '' && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== '' && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact) && checkInformationRooms) {\n      setShowLoading(true); //Submit\n\n      const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService, serviceData.utilitiesBeautyRelaxation, serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment, serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet, serviceData.utilitiesShopping, serviceData.utilitiesVehicle); //console.log(utilitiesServiceDTOList)\n\n      const accommodation = {\n        \"serviceDTO\": {\n          \"serviceName\": serviceData.propertyName,\n          \"fax\": serviceData.fax,\n          \"phone\": serviceData.phoneNumberContact,\n          \"email\": serviceData.emailContact,\n          \"address\": serviceData.address,\n          \"city\": serviceData.city,\n          \"link\": serviceData.website,\n          \"status\": serviceData.status,\n          \"taxCode\": serviceData.taxCode,\n          \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\n          \"partnerEmail\": sessionStorage.getItem('email')\n        },\n        \"accommodationType\": sessionStorage.getItem('detail-service'),\n        \"rate\": onStarRating ? serviceData.starRating : 0,\n        \"numberFloors\": serviceData.numberOfFloors,\n        \"description\": serviceData.description,\n        \"roomDTOList\": [...roomsData],\n        \"utilitiesServiceDTOList\": utilitiesServiceDTOList\n      };\n\n      if (window.location.pathname.includes('/partner/edit-service')) {\n        axios.put(API_PUT_UPDATE_SERVICEACCOMMODATION + serviceId, accommodation).then(res => {\n          let countDelete = 0;\n          let lengthDelete = 0;\n          const receptionHallPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/receptionHallPhoto`);\n          const outdoorPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/outdoorPhoto`);\n          const otherPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/otherPhoto`);\n          let allRefDelete = [];\n          listAll(receptionHallPhotoRef).then(res => {\n            countDelete += res.items.length;\n            res.items.forEach(itemRef => {\n              allRefDelete.push(itemRef);\n            });\n            listAll(outdoorPhotoRef).then(res => {\n              countDelete += res.items.length;\n              res.items.forEach(itemRef => {\n                allRefDelete.push(itemRef);\n              });\n              listAll(otherPhotoRef).then(res => {\n                countDelete += res.items.length;\n                res.items.forEach(itemRef => {\n                  allRefDelete.push(itemRef);\n                });\n                roomsData.map((room, index) => {\n                  const bedRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/bedRoomPhoto`);\n                  const wcPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/wcPhoto`);\n                  const otherRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/otherPhoto`);\n                  listAll(bedRoomPhotoRef).then(res => {\n                    countDelete += res.items.length;\n                    res.items.forEach(itemRef => {\n                      allRefDelete.push(itemRef);\n                    });\n                    listAll(wcPhotoRef).then(res => {\n                      countDelete += res.items.length;\n                      res.items.forEach(itemRef => {\n                        allRefDelete.push(itemRef);\n                      });\n                      listAll(otherRoomPhotoRef).then(res => {\n                        countDelete += res.items.length;\n                        res.items.forEach(itemRef => {\n                          allRefDelete.push(itemRef);\n                        });\n                        allRefDelete.forEach(itemRef => {\n                          deleteObject(ref(storage, itemRef.fullPath)).then(() => {\n                            ++lengthDelete;\n\n                            if (lengthDelete == countDelete) {\n                              UploadAccommodation();\n                            }\n                          });\n                        });\n                      });\n                    });\n                  });\n                });\n              });\n            });\n          });\n        });\n      } else {\n        await axios.post('http://localhost:8081/wetravel/create/accommodation', accommodation).then(res => {\n          const serviceId = res.data.data.serviceDTO.serviceId; //Anh\n\n          count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n\n          for (let j = 0; j < roomsData.length; j++) {\n            count.current += roomsData[j].bedRoomPhoto.length + roomsData[j].wcPhoto.length + roomsData[j].otherPhoto.length;\n          }\n\n          UploadImage(serviceData.receptionHallPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n          UploadImage(serviceData.outdoorPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n          UploadImage(serviceData.otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n\n          for (let i = 0; i < roomsData.length; i++) {\n            UploadImage(roomsData[i].bedRoomPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'bedRoomPhoto');\n            UploadImage(roomsData[i].wcPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'wcPhoto');\n            UploadImage(roomsData[i].otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'otherPhoto');\n          }\n        }).catch(e => {\n          console.log(e);\n        });\n        setShowLoading(false);\n      }\n    } else {\n      toast.warning(languageList[5]);\n    }\n  }; //Submit Entertainment Service\n\n\n  const handleClickSubmitEntertainment = async () => {\n    console.log('runn insert entertainment');\n    var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\n    var regexWebsite = new RegExp(regexWeb);\n\n    if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' || serviceData.emailContact === '' || serviceData.timeOpen === '' || serviceData.timeClose === '' || serviceData.dateOpen.length == 0 || serviceData.receptionHallPhoto.length == 0 || serviceData.outdoorPhoto.length == 0) {\n      toast.warning(languageList[3]);\n    } else if (serviceData.propertyName !== '' && serviceData.address !== '' && (serviceData.website === '' || serviceData.website.match(regexWebsite)) && serviceData.taxCode !== '' && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== '' && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact)) {\n      setShowLoading(true); //Submit\n\n      const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService, serviceData.utilitiesBeautyRelaxation, serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment, serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet, serviceData.utilitiesShopping, serviceData.utilitiesVehicle); //Submit\n\n      const entertainment = {\n        \"serviceDTO\": {\n          \"serviceName\": serviceData.propertyName,\n          \"fax\": serviceData.fax,\n          \"phone\": serviceData.phoneNumberContact,\n          \"email\": serviceData.emailContact,\n          \"address\": serviceData.address,\n          \"city\": serviceData.city,\n          \"link\": serviceData.website,\n          \"status\": serviceData.status,\n          \"taxCode\": serviceData.taxCode,\n          \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\n          \"partnerEmail\": sessionStorage.getItem('email')\n        },\n        entertainmentType: sessionStorage.getItem('detail-service'),\n        dowOpen: serviceData.dateOpen.join(\" \"),\n        timeOpen: serviceData.timeOpen,\n        timeClose: serviceData.timeClose,\n        priceTicketAdult: serviceData.adultTicketPrice,\n        priceTicketChildren: serviceData.childTiketPrice,\n        utilitiesServiceDTOList: utilitiesServiceDTOList,\n        description: serviceData.description\n      };\n\n      if (window.location.pathname.includes('/partner/edit-service')) {\n        axios.put(API_PUT_UPDATE_SERVICEENTERTAIMENT + serviceId, entertainment).then(res => {\n          const receptionHallPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/receptionHallPhoto`);\n          const outdoorPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/outdoorPhoto`);\n          const otherPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/otherPhoto`);\n          let countDelete = 0;\n          let lengthDelete = 0;\n          let allRefDelete = [];\n          listAll(receptionHallPhotoRef).then(res => {\n            countDelete += res.items.length;\n            res.items.forEach(itemRef => {\n              allRefDelete.push(itemRef);\n            });\n            listAll(outdoorPhotoRef).then(res => {\n              countDelete += res.items.length;\n              res.items.forEach(itemRef => {\n                allRefDelete.push(itemRef);\n              });\n              listAll(otherPhotoRef).then(res => {\n                countDelete += res.items.length;\n                res.items.forEach(itemRef => {\n                  allRefDelete.push(itemRef);\n                });\n                allRefDelete.forEach(itemRef => {\n                  deleteObject(ref(storage, itemRef.fullPath)).then(() => {\n                    ++lengthDelete;\n\n                    if (lengthDelete == countDelete) {\n                      //Anh\n                      count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n                      UploadImage(serviceData.receptionHallPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n                      UploadImage(serviceData.outdoorPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n                      UploadImage(serviceData.otherPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n                    }\n                  });\n                });\n              });\n            });\n          });\n        }).catch(e => {\n          console.log(e);\n        });\n      } else {\n        await axios.post('http://localhost:8081/wetravel/create/entertainment', entertainment).then(res => {\n          //console.log(res)\n          const serviceId = res.data.data.serviceDTO.serviceId; //Anh\n\n          count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n          UploadImage(serviceData.receptionHallPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n          UploadImage(serviceData.outdoorPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n          UploadImage(serviceData.otherPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n        }).catch(e => {\n          console.log(e);\n        });\n        setShowLoading(false);\n      }\n    } else {\n      toast.warning(languageList[4]);\n    }\n  }; //Submit Restaurants Services\n\n\n  const handleClickSubmitRestaurant = async () => {\n    var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\n    var regexWebsite = new RegExp(regexWeb);\n\n    if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' || serviceData.emailContact === '' || serviceData.typeOfCuisine.length == 0 || serviceData.timeOpen === '' || serviceData.timeClose === '' || serviceData.receptionHallPhoto.length == 0) {\n      toast.warning(languageList[4]);\n    } else if (serviceData.propertyName !== '' && serviceData.address !== '' && (serviceData.website === '' || serviceData.website.match(regexWebsite)) && serviceData.typeOfCuisine.length > 0 && serviceData.taxCode !== '' && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== '' && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact) && checkInformationRooms) {\n      setShowLoading(true); //Submit\n\n      const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService, serviceData.utilitiesBeautyRelaxation, serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment, serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet, serviceData.utilitiesShopping, serviceData.utilitiesVehicle);\n      const restaurant = {\n        \"serviceDTO\": {\n          \"serviceName\": serviceData.propertyName,\n          \"fax\": serviceData.fax,\n          \"phone\": serviceData.phoneNumberContact,\n          \"email\": serviceData.emailContact,\n          \"address\": serviceData.address,\n          \"city\": serviceData.city,\n          \"link\": serviceData.website,\n          \"status\": serviceData.status,\n          \"taxCode\": serviceData.taxCode,\n          \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\n          \"partnerEmail\": sessionStorage.getItem('email')\n        },\n        restaurantServiceType: sessionStorage.getItem('detail-service'),\n        timeOpen: serviceData.timeOpen,\n        timeClose: serviceData.timeClose,\n        description: serviceData.description,\n        rate: onStarRating ? serviceData.starRating : 0,\n        utilitiesServiceDTOList: utilitiesServiceDTOList,\n        typeCuisineServiceDTOList: serviceData.typeOfCuisine\n      };\n\n      if (window.location.pathname.includes('/partner/edit-service')) {\n        axios.put(API_PUT_UPDATE_SERVICERESTAURANT + serviceId, restaurant).then(res => {\n          const receptionHallPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/receptionHallPhoto`);\n          const outdoorPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/outdoorPhoto`);\n          const otherPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/otherPhoto`);\n          let countDelete = 0;\n          let lengthDelete = 0;\n          let allRefDelete = [];\n          listAll(receptionHallPhotoRef).then(res => {\n            countDelete += res.items.length;\n            res.items.forEach(itemRef => {\n              allRefDelete.push(itemRef);\n            });\n            listAll(outdoorPhotoRef).then(res => {\n              countDelete += res.items.length;\n              res.items.forEach(itemRef => {\n                allRefDelete.push(itemRef);\n              });\n              listAll(otherPhotoRef).then(res => {\n                countDelete += res.items.length;\n                res.items.forEach(itemRef => {\n                  allRefDelete.push(itemRef);\n                });\n                allRefDelete.forEach(itemRef => {\n                  deleteObject(ref(storage, itemRef.fullPath)).then(() => {\n                    ++lengthDelete;\n\n                    if (lengthDelete == countDelete) {\n                      //Anh\n                      count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n                      UploadImage(serviceData.receptionHallPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n                      UploadImage(serviceData.outdoorPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n                      UploadImage(serviceData.otherPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n                    }\n                  });\n                });\n              });\n            });\n          });\n        }).catch(e => {\n          console.log(e);\n        });\n      } else {\n        await axios.post('http://localhost:8081/wetravel/create/restaurant', restaurant).then(res => {\n          const serviceId = res.data.data.serviceDTO.serviceId; //Anh\n\n          count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length;\n          UploadImage(serviceData.receptionHallPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto');\n          UploadImage(serviceData.outdoorPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto');\n          UploadImage(serviceData.otherPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'otherPhoto');\n        }).catch(e => {});\n      }\n\n      setShowLoading(false);\n    } else {\n      toast.warning(languageList[5]);\n    }\n  };\n\n  const numberOfOption = [[/*#__PURE__*/_jsxDEV(RegisterInformationAccomodation, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    onStarRating: onStarRating,\n    setOnStarRating: setOnStarRating\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 865,\n    columnNumber: 10\n  }, this), /*#__PURE__*/_jsxDEV(RegisterInformationRooms, {\n    languageSelected: languageSelected,\n    formFields: roomsData,\n    setFormFields: setRoomsData,\n    handleClickSaveAndNext: handleClickSaveAndNext\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 869,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(RegisterUtilitiesAndServices, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 871,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(RegisterPhotos, {\n    languageSelected: languageSelected,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    handleClickSubmit: handleClickSubmitAccomodation\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 873,\n    columnNumber: 9\n  }, this)], [/*#__PURE__*/_jsxDEV(RegisterInformationEntertainment, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    onStarRating: onStarRating,\n    setOnStarRating: setOnStarRating\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 875,\n    columnNumber: 10\n  }, this), /*#__PURE__*/_jsxDEV(RegisterUtilitiesAndServices, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 878,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(RegisterPhotos, {\n    languageSelected: languageSelected,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    handleClickSubmit: handleClickSubmitEntertainment\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 880,\n    columnNumber: 9\n  }, this)], [/*#__PURE__*/_jsxDEV(RegisterInformationRestaurant, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    onStarRating: onStarRating,\n    setOnStarRating: setOnStarRating\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 882,\n    columnNumber: 10\n  }, this), /*#__PURE__*/_jsxDEV(RegisterUtilitiesAndServices, {\n    languageSelected: languageSelected,\n    handleClickSaveAndNext: handleClickSaveAndNext,\n    serviceData: serviceData,\n    setServiceData: setServiceData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 885,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(RegisterPhotos, {\n    languageSelected: languageSelected,\n    serviceData: serviceData,\n    setServiceData: setServiceData,\n    handleClickSubmit: handleClickSubmitRestaurant\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 887,\n    columnNumber: 9\n  }, this)]];\n\n  const handleSelectAnOpion = item => {\n    setSelectedOption(item);\n  };\n\n  if (!getDataComplete && window.location.pathname.includes('edit')) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-service\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 896,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-service\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container d-flex space-register-information-service\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"options\",\n          children: numberOfOption[categoryService - 1].map((item, index) => /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `option ${selectedOption === index && 'selected-option'}`,\n              onClick: () => handleSelectAnOpion(index),\n              children: languageList[categoryService - 1][index]\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 906,\n              columnNumber: 29\n            }, this)\n          }, void 0, false))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 904,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-register-information-service\",\n          children: numberOfOption[categoryService - 1][selectedOption]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 913,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 903,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 902,\n      columnNumber: 13\n    }, this), showLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-popup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 919,\n        columnNumber: 17\n      }, this), showLoading && /*#__PURE__*/_jsxDEV(LoadingDialog, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 920,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 918,\n      columnNumber: 29\n    }, this)]\n  }, void 0, true);\n}\n\n_s(RegisterInformationServiceLayout, \"OOGQUf76JRGbaaY5MI/xEGptq7s=\", false, function () {\n  return [useNavigate];\n});\n\n_c = RegisterInformationServiceLayout;\nexport default _c2 = /*#__PURE__*/memo(RegisterInformationServiceLayout);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RegisterInformationServiceLayout\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["vietnamese","english","useState","memo","useEffect","useRef","useLayoutEffect","useNavigate","RegisterInformationRooms","RegisterInformationAccomodation","RegisterUtilitiesAndServices","RegisterPhotos","RegisterInformationEntertainment","RegisterInformationRestaurant","axios","LoadingDialog","toast","UploadImage","API_PUT_UPDATE_SERVICEACCOMMODATION","API_SERVICE_DETAIL_INFORMATION","API_PUT_UPDATE_SERVICEENTERTAIMENT","API_PUT_UPDATE_SERVICERESTAURANT","ref","listAll","getDownloadURL","deleteObject","storage","RegisterInformationServiceLayout","setProgress","languageSelected","navigate","showLoading","setShowLoading","moveToTop","setMoveToTop","window","scrollTo","languageList","categoryService","sessionStorage","getItem","categoryDetailService","selectedOption","setSelectedOption","serviceData","setServiceData","propertyName","status","starRating","city","address","website","taxCode","description","fax","phoneNumberContact","emailContact","numberOfFloors","timeOpen","timeClose","typeOfCuisine","dateOpen","childTiketPrice","adultTicketPrice","utilitiesInternet","utilitiesFacilities","utilitiesAccomodationService","utilitiesBeautyRelaxation","utilitiesFoodService","utilitiesEntertainment","utilitiesChildrenService","utilitiesShopping","utilitiesBusinessService","utilitiesVehicle","receptionHallPhoto","outdoorPhoto","otherPhoto","roomsData","setRoomsData","showHide","roomName","roomType","numberOfRoom","bedType","numberOfPeopleRoom","roomSize","dailyPrice","holidayPrice","bedRoomPhoto","wcPhoto","onStarRating","setOnStarRating","getDataComplete","setGetDataComplete","serviceId","queryString","location","search","urlParams","URLSearchParams","get","setAllImageDataForEdit","serviceDataRaw","pathname","includes","console","log","params","then","res","data","serviceDTO","serviceName","link","phone","email","rate","numberFloors","dowOpen","split","priceTicketChildren","priceTicketAdult","typeCuisineServiceDTOList","utilitiesListDTO","utilitiesServiceDTOList","map","item","utilitiesCategoryId","push","utilitiesSubcategoryId","countAllImage","countImageGeted","receptionHallPhotoRef","outdoorPhotoRef","otherPhotoRef","roomDTOList","room","index","countAllImageInRoom","countImageInRoomGeted","roomItem","bedRoomPhotoRef","wcPhotoRef","otherRoomPhotoRef","items","length","forEach","itemRef","fullPath","url","method","responseType","blob","roomDataUpdate","catch","count","leng","setLeng","current","success","handleClickSaveAndNext","pre","checkInformationRooms","i","UploadAccommodation","j","handleClickSubmitAccomodation","regexWeb","regexWebsite","RegExp","warning","match","test","concat","accommodation","put","countDelete","lengthDelete","allRefDelete","post","e","handleClickSubmitEntertainment","entertainment","entertainmentType","join","handleClickSubmitRestaurant","restaurant","restaurantServiceType","numberOfOption","handleSelectAnOpion"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/Layout/RegisterInformationServiceLayout/index.js"],"sourcesContent":["import { vietnamese, english } from \"../../Languages/OptionInputInformationService\";\r\nimport { useState, memo, useEffect, useRef, useLayoutEffect } from 'react'\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport './RegisterInformationServiceLayout.scss'\r\nimport RegisterInformationRooms from '../../pages/RegisterInformationRooms'\r\nimport RegisterInformationAccomodation from '../../pages/RegisterInformationAccomodation'\r\nimport RegisterUtilitiesAndServices from \"../../pages/RegisterUtilitiesAndServices\";\r\nimport RegisterPhotos from \"../../pages/RegisterPhotos\";\r\nimport RegisterInformationEntertainment from \"../../pages/RegisterInformationEntertainment\";\r\nimport RegisterInformationRestaurant from \"../../pages/RegisterInformationRestaurant\";\r\nimport axios from \"axios\";\r\nimport LoadingDialog from \"../LoadingDialog\";\r\nimport { toast } from 'react-toastify'\r\nimport { UploadImage } from \"../../../firebase/UploadImage\";\r\nimport { API_PUT_UPDATE_SERVICEACCOMMODATION, API_SERVICE_DETAIL_INFORMATION, API_PUT_UPDATE_SERVICEENTERTAIMENT, API_PUT_UPDATE_SERVICERESTAURANT } from \"../../API\"\r\nimport { ref, listAll, getDownloadURL, deleteObject } from 'firebase/storage'\r\nimport { storage } from \"../../../firebase/Upload\";\r\n\r\n\r\nfunction RegisterInformationServiceLayout({ setProgress, languageSelected }) {\r\n    const navigate = useNavigate()\r\n\r\n    const [showLoading, setShowLoading] = useState(false);\r\n    const [moveToTop, setMoveToTop] = useState(true)\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n    }, [moveToTop])\r\n\r\n    let languageList = (languageSelected === 'EN' ? english : vietnamese)\r\n    const categoryService = sessionStorage.getItem('index-service-selected')\r\n    const categoryDetailService = sessionStorage.getItem('detail-service')\r\n    const [selectedOption, setSelectedOption] = useState(0)\r\n\r\n    const [serviceData, setServiceData] = useState({\r\n        propertyName: '',\r\n        status: 1,\r\n        starRating: 1,\r\n        city: 'Hà Nội',\r\n        address: '',\r\n        website: '',\r\n        taxCode: '',\r\n        description: '',\r\n        fax: '',\r\n        phoneNumberContact: '',\r\n        emailContact: '',\r\n        numberOfFloors: 0,\r\n        timeOpen: '',\r\n        timeClose: '',\r\n        typeOfCuisine: [],\r\n        dateOpen: [],\r\n        childTiketPrice: 0,\r\n        adultTicketPrice: 0,\r\n        utilitiesInternet: [],\r\n        utilitiesFacilities: [],\r\n        utilitiesAccomodationService: [],\r\n        utilitiesBeautyRelaxation: [],\r\n        utilitiesFoodService: [],\r\n        utilitiesEntertainment: [],\r\n        utilitiesChildrenService: [],\r\n        utilitiesShopping: [],\r\n        utilitiesBusinessService: [],\r\n        utilitiesVehicle: [],\r\n        receptionHallPhoto: [],\r\n        outdoorPhoto: [],\r\n        otherPhoto: []\r\n    })\r\n\r\n\r\n    //form input rooms\r\n    const [roomsData, setRoomsData] = useState([\r\n        {\r\n            showHide: true,\r\n            roomName: '',\r\n            roomType: 0,\r\n            numberOfRoom: 0,\r\n            bedType: 0,\r\n            numberOfPeopleRoom: 0,\r\n            roomSize: 0,\r\n            dailyPrice: 0,\r\n            holidayPrice: 0,\r\n            description: '',\r\n            bedRoomPhoto: [],\r\n            wcPhoto: [],\r\n            otherPhoto: []\r\n        }\r\n    ])\r\n\r\n    //on off star rating\r\n    const [onStarRating, setOnStarRating] = useState(true)\r\n\r\n    const [getDataComplete, setGetDataComplete] = useState(false)\r\n\r\n    let serviceId;\r\n\r\n    const queryString = window.location.search;\r\n    const urlParams = new URLSearchParams(queryString);\r\n    serviceId = urlParams.get('serviceId');\r\n\r\n    function setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomsData) {\r\n        serviceDataRaw.receptionHallPhoto = receptionHallPhoto\r\n        serviceDataRaw.outdoorPhoto = outdoorPhoto\r\n        serviceDataRaw.otherPhoto = otherPhoto\r\n        setServiceData({ ...serviceDataRaw, receptionHallPhoto: receptionHallPhoto, outdoorPhoto: outdoorPhoto, otherPhoto: otherPhoto })\r\n        setRoomsData(roomsData)\r\n        setGetDataComplete(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        //Lấy dữ liệu service theo serviceId ở trên để edit\r\n        if (window.location.pathname.includes('/partner/edit-service')) {\r\n            console.log(serviceId)\r\n            axios.get(API_SERVICE_DETAIL_INFORMATION, {\r\n                params: {\r\n                    serviceId: serviceId\r\n                },\r\n            }).then((res) => {\r\n                console.log(res)\r\n                //data of Accomodation Information\r\n                let serviceDataRaw = {\r\n                    propertyName: '',\r\n                    status: 1,\r\n                    starRating: 1,\r\n                    city: 'Hà Nội',\r\n                    address: '',\r\n                    website: '',\r\n                    taxCode: '',\r\n                    description: '',\r\n                    fax: '',\r\n                    phoneNumberContact: '',\r\n                    emailContact: '',\r\n                    numberOfFloors: 0,\r\n                    timeOpen: '',\r\n                    timeClose: '',\r\n                    typeOfCuisine: [],\r\n                    dateOpen: [],\r\n                    childTiketPrice: 0,\r\n                    adultTicketPrice: 0,\r\n                    utilitiesInternet: [],\r\n                    utilitiesFacilities: [],\r\n                    utilitiesAccomodationService: [],\r\n                    utilitiesBeautyRelaxation: [],\r\n                    utilitiesFoodService: [],\r\n                    utilitiesEntertainment: [],\r\n                    utilitiesChildrenService: [],\r\n                    utilitiesShopping: [],\r\n                    utilitiesBusinessService: [],\r\n                    utilitiesVehicle: [],\r\n                    receptionHallPhoto: [],\r\n                    outdoorPhoto: [],\r\n                    otherPhoto: []\r\n                }\r\n                serviceDataRaw.propertyName = res.data.data.serviceDTO.serviceName\r\n                serviceDataRaw.status = res.data.data.serviceDTO.status\r\n                serviceDataRaw.city = res.data.data.serviceDTO.city\r\n                serviceDataRaw.address = res.data.data.serviceDTO.address\r\n                serviceDataRaw.website = res.data.data.serviceDTO.link\r\n                serviceDataRaw.taxCode = res.data.data.serviceDTO.taxCode\r\n                serviceDataRaw.description = res.data.data.description\r\n                serviceDataRaw.phoneNumberContact = res.data.data.serviceDTO.phone\r\n                serviceDataRaw.fax = res.data.data.serviceDTO.fax\r\n                serviceDataRaw.emailContact = res.data.data.serviceDTO.email\r\n\r\n                if (sessionStorage.getItem('index-service-selected') == 1) {\r\n                    serviceDataRaw.starRating = res.data.data.rate\r\n                    serviceDataRaw.numberOfFloors = res.data.data.numberFloors\r\n                }\r\n                else if (sessionStorage.getItem('index-service-selected') == 2) {\r\n                    serviceDataRaw.timeOpen = res.data.data.timeOpen\r\n                    serviceDataRaw.timeClose = res.data.data.timeClose\r\n                    serviceDataRaw.dateOpen = res.data.data.dowOpen.split(' ')\r\n                    serviceDataRaw.childTiketPrice = res.data.data.priceTicketChildren\r\n                    serviceDataRaw.adultTicketPrice = res.data.data.priceTicketAdult\r\n                } else {\r\n                    serviceDataRaw.timeOpen = res.data.data.timeOpen\r\n                    serviceDataRaw.timeClose = res.data.data.timeClose\r\n                    serviceDataRaw.starRating = res.data.data.rate\r\n                    serviceDataRaw.typeOfCuisine = res.data.data.typeCuisineServiceDTOList\r\n                }\r\n\r\n                const utilitiesListDTO = res.data.data.utilitiesServiceDTOList\r\n                utilitiesListDTO.map((item) => {\r\n                    switch (item.utilitiesCategoryId) {\r\n                        case 1:\r\n                            serviceDataRaw.utilitiesInternet.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 1\r\n                            })\r\n                            break;\r\n                        case 2:\r\n                            serviceDataRaw.utilitiesFacilities.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 2\r\n                            })\r\n                            break;\r\n                        case 3:\r\n                            serviceDataRaw.utilitiesAccomodationService.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 3\r\n                            })\r\n                            break;\r\n                        case 4:\r\n                            serviceDataRaw.utilitiesBeautyRelaxation.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 4\r\n                            })\r\n                            break;\r\n                        case 5:\r\n                            serviceDataRaw.utilitiesFoodService.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 5\r\n                            })\r\n                            break;\r\n                        case 6:\r\n                            serviceDataRaw.utilitiesEntertainment.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 6\r\n                            })\r\n                            break;\r\n                        case 7:\r\n                            serviceDataRaw.utilitiesChildrenService.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 7\r\n                            })\r\n                            break;\r\n                        case 8:\r\n                            serviceDataRaw.utilitiesShopping.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 8\r\n                            })\r\n                            break;\r\n                        case 9:\r\n                            serviceDataRaw.utilitiesBusinessService.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 9\r\n                            })\r\n                            break;\r\n                        case 10:\r\n                            serviceDataRaw.utilitiesVehicle.push({\r\n                                utilitiesSubcategoryId: item.utilitiesSubcategoryId,\r\n                                utilitiesCategoryId: 10\r\n                            })\r\n                            break;\r\n                    }\r\n                })\r\n\r\n                let countAllImage = 0;\r\n                let countImageGeted = 0;\r\n\r\n                let receptionHallPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/receptionHallPhoto`)\r\n                let outdoorPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/outdoorPhoto`)\r\n                let otherPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/otherPhoto`)\r\n\r\n                if (sessionStorage.getItem('index-service-selected') == 2) {\r\n                    receptionHallPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/receptionHallPhoto`)\r\n                    outdoorPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/outdoorPhoto`)\r\n                    otherPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/otherPhoto`)\r\n                } else if (sessionStorage.getItem('index-service-selected') == 3) {\r\n                    receptionHallPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/receptionHallPhoto`)\r\n                    outdoorPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/outdoorPhoto`)\r\n                    otherPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/otherPhoto`)\r\n                }\r\n\r\n                //console.log('chuan bi lay phong')\r\n                if (sessionStorage.getItem('index-service-selected') == 1) {\r\n                    res.data.data.roomDTOList.map((room, index) => {\r\n                        let countAllImageInRoom = 0;\r\n                        let countImageInRoomGeted = 0;\r\n\r\n                        let roomItem = {\r\n                            showHide: false,\r\n                            roomName: room.roomName,\r\n                            roomType: room.roomType,\r\n                            numberOfRoom: room.numberOfRoom,\r\n                            bedType: room.bedType,\r\n                            numberOfPeopleRoom: room.numberOfPeopleRoom,\r\n                            roomSize: room.roomSize,\r\n                            dailyPrice: room.dailyPrice,\r\n                            holidayPrice: room.holidayPrice,\r\n                            description: room.description,\r\n                            bedRoomPhoto: [],\r\n                            wcPhoto: [],\r\n                            otherPhoto: []\r\n                        }\r\n\r\n\r\n                        const bedRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/bedRoomPhoto`)\r\n                        const wcPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/wcPhoto`)\r\n                        const otherRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/otherPhoto`)\r\n\r\n                        listAll(bedRoomPhotoRef).then((res) => {\r\n                            countAllImage += res.items.length\r\n                            countAllImageInRoom += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                getDownloadURL(ref(storage, itemRef.fullPath))\r\n                                    .then((url) => {\r\n                                        axios({\r\n                                            url: url,\r\n                                            method: 'GET',\r\n                                            responseType: 'blob',\r\n                                        }).then(blob => {\r\n                                            roomItem.bedRoomPhoto.push(blob.data)\r\n                                            countImageInRoomGeted++\r\n                                            countImageGeted++;\r\n                                            if (countImageInRoomGeted === countAllImageInRoom) {\r\n                                                roomDataUpdate.push(roomItem)\r\n                                            }\r\n                                            if (countImageGeted === countAllImage) {\r\n                                                setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                            }\r\n                                        })\r\n                                    })\r\n                            })\r\n                        })\r\n\r\n                        listAll(wcPhotoRef).then((res) => {\r\n                            countAllImage += res.items.length\r\n                            countAllImageInRoom += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                getDownloadURL(ref(storage, itemRef.fullPath))\r\n                                    .then((url) => {\r\n                                        axios({\r\n                                            url: url,\r\n                                            method: 'GET',\r\n                                            responseType: 'blob',\r\n                                        }).then(blob => {\r\n                                            roomItem.wcPhoto.push(blob.data)\r\n                                            countImageGeted++;\r\n                                            countImageInRoomGeted++\r\n                                            if (countImageInRoomGeted === countAllImageInRoom) {\r\n                                                roomDataUpdate.push(roomItem)\r\n                                            }\r\n                                            if (countImageGeted === countAllImage) {\r\n                                                setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                            }\r\n                                        })\r\n                                    })\r\n                            })\r\n                        })\r\n\r\n                        listAll(otherRoomPhotoRef).then((res) => {\r\n                            countAllImage += res.items.length\r\n                            countAllImageInRoom += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                getDownloadURL(ref(storage, itemRef.fullPath))\r\n                                    .then((url) => {\r\n                                        axios({\r\n                                            url: url,\r\n                                            method: 'GET',\r\n                                            responseType: 'blob',\r\n                                        }).then(blob => {\r\n                                            roomItem.otherPhoto.push(blob.data)\r\n                                            countImageGeted++;\r\n                                            countImageInRoomGeted++\r\n                                            if (countImageInRoomGeted === countAllImageInRoom) {\r\n                                                roomDataUpdate.push(roomItem)\r\n                                            }\r\n                                            if (countImageGeted === countAllImage) {\r\n                                                setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                            }\r\n                                        })\r\n                                    })\r\n                            })\r\n                        })\r\n                    })\r\n                }\r\n\r\n\r\n                let receptionHallPhoto = []\r\n                let outdoorPhoto = []\r\n                let otherPhoto = []\r\n                let roomDataUpdate = []\r\n\r\n                //console.log(receptionHallPhotoRef)\r\n\r\n                listAll(receptionHallPhotoRef).then((res) => {\r\n                    countAllImage += res.items.length\r\n                    //console.log('count image: ', countAllImage)\r\n                    res.items.forEach((itemRef) => {\r\n                        getDownloadURL(ref(storage, itemRef.fullPath))\r\n                            .then((url) => {\r\n                                console.log(url)\r\n                                axios({\r\n                                    url: url,\r\n                                    method: 'GET',\r\n                                    responseType: 'blob',\r\n                                }).then(blob => {\r\n                                    receptionHallPhoto.push(blob.data)\r\n                                    countImageGeted++;\r\n                                    console.log('check', countImageGeted)\r\n                                    if (countImageGeted === countAllImage) {\r\n                                        console.log('xong')\r\n                                        setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                    }\r\n                                })\r\n                            })\r\n                    })\r\n                })\r\n\r\n                listAll(outdoorPhotoRef).then((res) => {\r\n                    countAllImage += res.items.length\r\n                    res.items.forEach((itemRef) => {\r\n                        getDownloadURL(ref(storage, itemRef.fullPath))\r\n                            .then((url) => {\r\n                                axios({\r\n                                    url: url,\r\n                                    method: 'GET',\r\n                                    responseType: 'blob',\r\n                                }).then(blob => {\r\n                                    outdoorPhoto.push(blob.data)\r\n                                    countImageGeted++;\r\n                                    if (countImageGeted === countAllImage) {\r\n                                        setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                    }\r\n                                })\r\n                            })\r\n                    })\r\n                })\r\n\r\n                listAll(otherPhotoRef).then((res) => {\r\n                    countAllImage += res.items.length\r\n                    res.items.forEach((itemRef) => {\r\n                        getDownloadURL(ref(storage, itemRef.fullPath))\r\n                            .then((url) => {\r\n                                axios({\r\n                                    url: url,\r\n                                    method: 'GET',\r\n                                    responseType: 'blob',\r\n                                }).then(blob => {\r\n                                    otherPhoto.push(blob.data)\r\n                                    countImageGeted++;\r\n                                    if (countImageGeted === countAllImage) {\r\n                                        setAllImageDataForEdit(serviceDataRaw, receptionHallPhoto, outdoorPhoto, otherPhoto, roomDataUpdate)\r\n                                    }\r\n                                })\r\n                            })\r\n                    })\r\n                })\r\n            }).catch(() => { })\r\n        }\r\n    }, [])\r\n\r\n    //\r\n    const count = useRef(-1)\r\n    const [leng, setLeng] = useState(0)\r\n    useEffect(() => {\r\n        if (leng === count.current) {\r\n            count.current = -1;\r\n            setLeng(0)\r\n            toast.success('Add service success')\r\n            navigate('/partner')\r\n        }\r\n    }, [leng])\r\n\r\n    const handleClickSaveAndNext = () => {\r\n        setMoveToTop(pre => !pre)\r\n        setSelectedOption(pre => pre + 1)\r\n    }\r\n\r\n    //Submit accomodation\r\n    const checkInformationRooms = () => {\r\n        for (let i = 0; i < roomsData.length; i++) {\r\n            if (roomsData[i].numberOfRoom == 0 || roomsData[i].numberOfPeopleRoom == 0 || roomsData[i].roomSize == 0\r\n                || roomsData[i].bedRoomPhoto.length == 0 || roomsData[i].bedRoomPhoto.length == 0 || roomsData[i].wcPhoto.length == 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true\r\n    }\r\n\r\n    const UploadAccommodation = () => {\r\n        count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n        for (let j = 0; j < roomsData.length; j++) {\r\n            count.current += (roomsData[j].bedRoomPhoto.length\r\n                + roomsData[j].wcPhoto.length\r\n                + roomsData[j].otherPhoto.length)\r\n        }\r\n        UploadImage(serviceData.receptionHallPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n        UploadImage(serviceData.outdoorPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n        UploadImage(serviceData.otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n        for (let i = 0; i < roomsData.length; i++) {\r\n            UploadImage(roomsData[i].bedRoomPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'bedRoomPhoto')\r\n            UploadImage(roomsData[i].wcPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'wcPhoto')\r\n            UploadImage(roomsData[i].otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'otherPhoto')\r\n        }\r\n    }\r\n\r\n    //Submit Accomodation Service\r\n    const handleClickSubmitAccomodation = async () => {\r\n        var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\r\n        var regexWebsite = new RegExp(regexWeb);\r\n\r\n        if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' ||\r\n            serviceData.emailContact === '' || serviceData.receptionHallPhoto.length == 0 || !checkInformationRooms) {\r\n            toast.warning(languageList[4])\r\n        }\r\n        else if (serviceData.propertyName !== '' && serviceData.address !== '' &&\r\n            (serviceData.website === '' || serviceData.website.match(regexWebsite)) && serviceData.taxCode !== ''\r\n            && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== ''\r\n            && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact) && checkInformationRooms) {\r\n            setShowLoading(true)\r\n            //Submit\r\n\r\n            const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService,\r\n                serviceData.utilitiesBeautyRelaxation,\r\n                serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment,\r\n                serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet,\r\n                serviceData.utilitiesShopping, serviceData.utilitiesVehicle)\r\n\r\n            //console.log(utilitiesServiceDTOList)\r\n\r\n            const accommodation = {\r\n                \"serviceDTO\":\r\n                {\r\n                    \"serviceName\": serviceData.propertyName,\r\n                    \"fax\": serviceData.fax,\r\n                    \"phone\": serviceData.phoneNumberContact,\r\n                    \"email\": serviceData.emailContact,\r\n                    \"address\": serviceData.address,\r\n                    \"city\": serviceData.city,\r\n                    \"link\": serviceData.website,\r\n                    \"status\": serviceData.status,\r\n                    \"taxCode\": serviceData.taxCode,\r\n                    \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\r\n                    \"partnerEmail\": sessionStorage.getItem('email')\r\n                },\r\n                \"accommodationType\": sessionStorage.getItem('detail-service'),\r\n                \"rate\": (onStarRating ? serviceData.starRating : 0),\r\n                \"numberFloors\": serviceData.numberOfFloors,\r\n                \"description\": serviceData.description,\r\n                \"roomDTOList\": [...roomsData],\r\n                \"utilitiesServiceDTOList\": utilitiesServiceDTOList\r\n            }\r\n\r\n            if (window.location.pathname.includes('/partner/edit-service')) {\r\n                axios.put(API_PUT_UPDATE_SERVICEACCOMMODATION + serviceId, accommodation)\r\n                    .then((res) => {\r\n                        let countDelete = 0;\r\n                        let lengthDelete = 0;\r\n\r\n                        const receptionHallPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/receptionHallPhoto`)\r\n                        const outdoorPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/outdoorPhoto`)\r\n                        const otherPhotoRef = ref(storage, `service/accomodation/${serviceId}/information/otherPhoto`)\r\n\r\n                        let allRefDelete = []\r\n\r\n                        listAll(receptionHallPhotoRef).then((res) => {\r\n                            countDelete += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                allRefDelete.push(itemRef)\r\n\r\n                            })\r\n                            listAll(outdoorPhotoRef).then((res) => {\r\n                                countDelete += res.items.length\r\n                                res.items.forEach((itemRef) => {\r\n                                    allRefDelete.push(itemRef)\r\n                                })\r\n                                listAll(otherPhotoRef).then((res) => {\r\n                                    countDelete += res.items.length\r\n                                    res.items.forEach((itemRef) => {\r\n                                        allRefDelete.push(itemRef)\r\n                                    })\r\n\r\n                                    roomsData.map((room, index) => {\r\n                                        const bedRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/bedRoomPhoto`)\r\n                                        const wcPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/wcPhoto`)\r\n                                        const otherRoomPhotoRef = ref(storage, `service/accomodation/${serviceId}/room/${index + 1}/otherPhoto`)\r\n\r\n                                        listAll(bedRoomPhotoRef).then((res) => {\r\n                                            countDelete += res.items.length\r\n                                            res.items.forEach((itemRef) => {\r\n                                                allRefDelete.push(itemRef)\r\n                                            })\r\n\r\n                                            listAll(wcPhotoRef).then((res) => {\r\n                                                countDelete += res.items.length\r\n                                                res.items.forEach((itemRef) => {\r\n                                                    allRefDelete.push(itemRef)\r\n                                                })\r\n\r\n                                                listAll(otherRoomPhotoRef).then((res) => {\r\n                                                    countDelete += res.items.length\r\n                                                    res.items.forEach((itemRef) => {\r\n                                                        allRefDelete.push(itemRef)\r\n                                                    })\r\n                                                    allRefDelete.forEach((itemRef) => {\r\n                                                        deleteObject(ref(storage, itemRef.fullPath)).then(() => {\r\n                                                            ++lengthDelete\r\n                                                            if (lengthDelete == countDelete) {\r\n                                                                UploadAccommodation()\r\n                                                            }\r\n                                                        })\r\n                                                    })\r\n                                                })\r\n                                            })\r\n                                        })\r\n                                    })\r\n                                })\r\n                            })\r\n                        })\r\n                    })\r\n            } else {\r\n                await axios.post('http://localhost:8081/wetravel/create/accommodation', accommodation)\r\n                    .then((res) => {\r\n                        const serviceId = res.data.data.serviceDTO.serviceId\r\n                        //Anh\r\n                        count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n                        for (let j = 0; j < roomsData.length; j++) {\r\n                            count.current += (roomsData[j].bedRoomPhoto.length\r\n                                + roomsData[j].wcPhoto.length\r\n                                + roomsData[j].otherPhoto.length)\r\n                        }\r\n                        UploadImage(serviceData.receptionHallPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n                        UploadImage(serviceData.outdoorPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n                        UploadImage(serviceData.otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n                        for (let i = 0; i < roomsData.length; i++) {\r\n                            UploadImage(roomsData[i].bedRoomPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'bedRoomPhoto')\r\n                            UploadImage(roomsData[i].wcPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'wcPhoto')\r\n                            UploadImage(roomsData[i].otherPhoto, 'service/accomodation', count, setLeng, serviceId, 'room', i + 1, 'otherPhoto')\r\n                        }\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log(e)\r\n                    })\r\n                setShowLoading(false)\r\n            }\r\n        }\r\n        else {\r\n            toast.warning(languageList[5])\r\n        }\r\n    }\r\n\r\n    //Submit Entertainment Service\r\n    const handleClickSubmitEntertainment = async () => {\r\n        console.log('runn insert entertainment')\r\n        var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\r\n        var regexWebsite = new RegExp(regexWeb);\r\n\r\n        if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' ||\r\n            serviceData.emailContact === '' || serviceData.timeOpen === '' || serviceData.timeClose === '' || serviceData.dateOpen.length == 0 ||\r\n            serviceData.receptionHallPhoto.length == 0 || serviceData.outdoorPhoto.length == 0) {\r\n            toast.warning(languageList[3])\r\n        }\r\n        else if (serviceData.propertyName !== '' && serviceData.address !== '' && (serviceData.website === '' || serviceData.website.match(regexWebsite))\r\n            && serviceData.taxCode !== '' && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== ''\r\n            && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact)) {\r\n            setShowLoading(true)\r\n\r\n            //Submit\r\n            const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService,\r\n                serviceData.utilitiesBeautyRelaxation,\r\n                serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment,\r\n                serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet,\r\n                serviceData.utilitiesShopping, serviceData.utilitiesVehicle)\r\n\r\n            //Submit\r\n            const entertainment = {\r\n                \"serviceDTO\":\r\n                {\r\n                    \"serviceName\": serviceData.propertyName,\r\n                    \"fax\": serviceData.fax,\r\n                    \"phone\": serviceData.phoneNumberContact,\r\n                    \"email\": serviceData.emailContact,\r\n                    \"address\": serviceData.address,\r\n                    \"city\": serviceData.city,\r\n                    \"link\": serviceData.website,\r\n                    \"status\": serviceData.status,\r\n                    \"taxCode\": serviceData.taxCode,\r\n                    \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\r\n                    \"partnerEmail\": sessionStorage.getItem('email')\r\n                },\r\n                entertainmentType: sessionStorage.getItem('detail-service'),\r\n                dowOpen: serviceData.dateOpen.join(\" \"),\r\n                timeOpen: serviceData.timeOpen,\r\n                timeClose: serviceData.timeClose,\r\n                priceTicketAdult: serviceData.adultTicketPrice,\r\n                priceTicketChildren: serviceData.childTiketPrice,\r\n                utilitiesServiceDTOList: utilitiesServiceDTOList,\r\n                description: serviceData.description\r\n            }\r\n\r\n            if (window.location.pathname.includes('/partner/edit-service')) {\r\n                axios.put(API_PUT_UPDATE_SERVICEENTERTAIMENT + serviceId, entertainment)\r\n                    .then((res) => {\r\n                        const receptionHallPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/receptionHallPhoto`)\r\n                        const outdoorPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/outdoorPhoto`)\r\n                        const otherPhotoRef = ref(storage, `service/entertainment/${serviceId}/information/otherPhoto`)\r\n\r\n                        let countDelete = 0;\r\n                        let lengthDelete = 0;\r\n                        let allRefDelete = []\r\n\r\n                        listAll(receptionHallPhotoRef).then((res) => {\r\n                            countDelete += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                allRefDelete.push(itemRef)\r\n\r\n                            })\r\n                            listAll(outdoorPhotoRef).then((res) => {\r\n                                countDelete += res.items.length\r\n                                res.items.forEach((itemRef) => {\r\n                                    allRefDelete.push(itemRef)\r\n                                })\r\n                                listAll(otherPhotoRef).then((res) => {\r\n                                    countDelete += res.items.length\r\n                                    res.items.forEach((itemRef) => {\r\n                                        allRefDelete.push(itemRef)\r\n                                    })\r\n                                    allRefDelete.forEach((itemRef) => {\r\n                                        deleteObject(ref(storage, itemRef.fullPath)).then(() => {\r\n                                            ++lengthDelete\r\n                                            if (lengthDelete == countDelete) {\r\n                                                //Anh\r\n                                                count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n                                                UploadImage(serviceData.receptionHallPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n                                                UploadImage(serviceData.outdoorPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n                                                UploadImage(serviceData.otherPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n                                            }\r\n                                        })\r\n                                    })\r\n                                })\r\n                            })\r\n                        })\r\n\r\n\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log(e)\r\n                    })\r\n            } else {\r\n                await axios.post('http://localhost:8081/wetravel/create/entertainment', entertainment)\r\n                    .then((res) => {\r\n                        //console.log(res)\r\n                        const serviceId = res.data.data.serviceDTO.serviceId\r\n                        //Anh\r\n                        count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n                        UploadImage(serviceData.receptionHallPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n                        UploadImage(serviceData.outdoorPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n                        UploadImage(serviceData.otherPhoto, 'service/entertainment', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log(e)\r\n                    })\r\n                setShowLoading(false)\r\n            }\r\n        }\r\n        else {\r\n            toast.warning(languageList[4])\r\n        }\r\n    }\r\n\r\n    //Submit Restaurants Services\r\n    const handleClickSubmitRestaurant = async () => {\r\n        var regexWeb = /[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi;\r\n        var regexWebsite = new RegExp(regexWeb);\r\n\r\n        if (serviceData.propertyName === '' || serviceData.address === '' || serviceData.taxCode === '' || serviceData.phoneNumberContact === '' ||\r\n            serviceData.emailContact === '' || serviceData.typeOfCuisine.length == 0 ||\r\n            serviceData.timeOpen === '' || serviceData.timeClose === '' || serviceData.receptionHallPhoto.length == 0) {\r\n            toast.warning(languageList[4])\r\n        }\r\n        else if (serviceData.propertyName !== '' && serviceData.address !== '' && (serviceData.website === '' || serviceData.website.match(regexWebsite))\r\n            && serviceData.typeOfCuisine.length > 0\r\n            && serviceData.taxCode !== '' && serviceData.phoneNumberContact.match(/\\d/g).length === 10 && serviceData.emailContact !== ''\r\n            && /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(serviceData.emailContact) && checkInformationRooms) {\r\n            setShowLoading(true)\r\n            //Submit\r\n            const utilitiesServiceDTOList = [].concat(serviceData.utilitiesAccomodationService,\r\n                serviceData.utilitiesBeautyRelaxation,\r\n                serviceData.utilitiesBusinessService, serviceData.utilitiesChildrenService, serviceData.utilitiesEntertainment,\r\n                serviceData.utilitiesFacilities, serviceData.utilitiesFoodService, serviceData.utilitiesInternet,\r\n                serviceData.utilitiesShopping, serviceData.utilitiesVehicle)\r\n\r\n            const restaurant = {\r\n                \"serviceDTO\": {\r\n                    \"serviceName\": serviceData.propertyName,\r\n                    \"fax\": serviceData.fax,\r\n                    \"phone\": serviceData.phoneNumberContact,\r\n                    \"email\": serviceData.emailContact,\r\n                    \"address\": serviceData.address,\r\n                    \"city\": serviceData.city,\r\n                    \"link\": serviceData.website,\r\n                    \"status\": serviceData.status,\r\n                    \"taxCode\": serviceData.taxCode,\r\n                    \"serviceCategory\": sessionStorage.getItem('index-service-selected'),\r\n                    \"partnerEmail\": sessionStorage.getItem('email')\r\n                },\r\n                restaurantServiceType: sessionStorage.getItem('detail-service'),\r\n                timeOpen: serviceData.timeOpen,\r\n                timeClose: serviceData.timeClose,\r\n                description: serviceData.description,\r\n                rate: (onStarRating ? serviceData.starRating : 0),\r\n                utilitiesServiceDTOList: utilitiesServiceDTOList,\r\n                typeCuisineServiceDTOList: serviceData.typeOfCuisine\r\n            }\r\n\r\n            if (window.location.pathname.includes('/partner/edit-service')) {\r\n                axios.put(API_PUT_UPDATE_SERVICERESTAURANT + serviceId, restaurant)\r\n                    .then((res) => {\r\n                        const receptionHallPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/receptionHallPhoto`)\r\n                        const outdoorPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/outdoorPhoto`)\r\n                        const otherPhotoRef = ref(storage, `service/restaurant/${serviceId}/information/otherPhoto`)\r\n\r\n                        let countDelete = 0;\r\n                        let lengthDelete = 0;\r\n                        let allRefDelete = []\r\n\r\n                        listAll(receptionHallPhotoRef).then((res) => {\r\n                            countDelete += res.items.length\r\n                            res.items.forEach((itemRef) => {\r\n                                allRefDelete.push(itemRef)\r\n\r\n                            })\r\n                            listAll(outdoorPhotoRef).then((res) => {\r\n                                countDelete += res.items.length\r\n                                res.items.forEach((itemRef) => {\r\n                                    allRefDelete.push(itemRef)\r\n                                })\r\n                                listAll(otherPhotoRef).then((res) => {\r\n                                    countDelete += res.items.length\r\n                                    res.items.forEach((itemRef) => {\r\n                                        allRefDelete.push(itemRef)\r\n                                    })\r\n                                    allRefDelete.forEach((itemRef) => {\r\n                                        deleteObject(ref(storage, itemRef.fullPath)).then(() => {\r\n                                            ++lengthDelete\r\n                                            if (lengthDelete == countDelete) {\r\n                                                //Anh\r\n                                                count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n                                                UploadImage(serviceData.receptionHallPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n                                                UploadImage(serviceData.outdoorPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n                                                UploadImage(serviceData.otherPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n                                            }\r\n                                        })\r\n                                    })\r\n                                })\r\n                            })\r\n                        })\r\n                    })\r\n                    .catch((e) => {\r\n                        console.log(e)\r\n                    })\r\n            } else {\r\n                await axios.post('http://localhost:8081/wetravel/create/restaurant', restaurant)\r\n                    .then((res) => {\r\n                        const serviceId = res.data.data.serviceDTO.serviceId\r\n                        //Anh\r\n                        count.current = serviceData.receptionHallPhoto.length + serviceData.outdoorPhoto.length + serviceData.otherPhoto.length\r\n                        UploadImage(serviceData.receptionHallPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'receptionHallPhoto')\r\n                        UploadImage(serviceData.outdoorPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'outdoorPhoto')\r\n                        UploadImage(serviceData.otherPhoto, 'service/restaurant', count, setLeng, serviceId, 'information', 0, 'otherPhoto')\r\n                    })\r\n                    .catch((e) => {\r\n                    })\r\n            }\r\n\r\n            setShowLoading(false)\r\n        }\r\n        else {\r\n            toast.warning(languageList[5])\r\n        }\r\n    }\r\n\r\n    const numberOfOption = [\r\n        [<RegisterInformationAccomodation languageSelected={languageSelected}\r\n            handleClickSaveAndNext={handleClickSaveAndNext}\r\n            serviceData={serviceData} setServiceData={setServiceData} onStarRating={onStarRating} setOnStarRating={setOnStarRating}\r\n        />,\r\n        <RegisterInformationRooms languageSelected={languageSelected} formFields={roomsData} setFormFields={setRoomsData}\r\n            handleClickSaveAndNext={handleClickSaveAndNext} />,\r\n        <RegisterUtilitiesAndServices languageSelected={languageSelected} handleClickSaveAndNext={handleClickSaveAndNext}\r\n            serviceData={serviceData} setServiceData={setServiceData} />,\r\n        <RegisterPhotos languageSelected={languageSelected} serviceData={serviceData} setServiceData={setServiceData}\r\n            handleClickSubmit={handleClickSubmitAccomodation} />],\r\n        [<RegisterInformationEntertainment languageSelected={languageSelected}\r\n            handleClickSaveAndNext={handleClickSaveAndNext} serviceData={serviceData} setServiceData={setServiceData}\r\n            onStarRating={onStarRating} setOnStarRating={setOnStarRating} />,\r\n        <RegisterUtilitiesAndServices languageSelected={languageSelected} handleClickSaveAndNext={handleClickSaveAndNext}\r\n            serviceData={serviceData} setServiceData={setServiceData} />,\r\n        <RegisterPhotos languageSelected={languageSelected} serviceData={serviceData} setServiceData={setServiceData}\r\n            handleClickSubmit={handleClickSubmitEntertainment} />],\r\n        [<RegisterInformationRestaurant languageSelected={languageSelected}\r\n            handleClickSaveAndNext={handleClickSaveAndNext}\r\n            serviceData={serviceData} setServiceData={setServiceData} onStarRating={onStarRating} setOnStarRating={setOnStarRating} />,\r\n        <RegisterUtilitiesAndServices languageSelected={languageSelected} handleClickSaveAndNext={handleClickSaveAndNext}\r\n            serviceData={serviceData} setServiceData={setServiceData} />,\r\n        <RegisterPhotos languageSelected={languageSelected} serviceData={serviceData} setServiceData={setServiceData}\r\n            handleClickSubmit={handleClickSubmitRestaurant} />]]\r\n\r\n    const handleSelectAnOpion = (item) => {\r\n        setSelectedOption(item)\r\n    }\r\n\r\n    if (!getDataComplete && window.location.pathname.includes('edit')) {\r\n        return (\r\n            <div className=\"detail-service\">Loading...</div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"detail-service\">\r\n                <div className=\"container d-flex space-register-information-service\">\r\n                    <div className=\"options\">\r\n                        {numberOfOption[categoryService - 1].map((item, index) => (<>\r\n                            <div key={index} className={`option ${selectedOption === index && 'selected-option'}`}\r\n                                onClick={() => handleSelectAnOpion(index)}\r\n                            >{languageList[categoryService - 1][index]}\r\n                            </div>\r\n                        </>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"content-register-information-service\">\r\n                        {numberOfOption[categoryService - 1][selectedOption]}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {showLoading && <div className='popup'>\r\n                <div className='bg-popup' />\r\n                {showLoading && <LoadingDialog />}\r\n            </div>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default memo(RegisterInformationServiceLayout)"],"mappings":"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"},"metadata":{},"sourceType":"module"}