{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{memo,useState}from'react';import{Link}from'react-router-dom';import'./Login.scss';import{HiOutlineMail}from'react-icons/hi';import{FiLock}from'react-icons/fi';import{AiOutlineEye,AiOutlineEyeInvisible}from'react-icons/ai';import Checkbox from'@mui/material/Checkbox';import{vietnamese,english}from'../../Languages/Login';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var languageSelected=_ref.languageSelected,handleForgotPassword=_ref.handleForgotPassword,setShowLoading=_ref.setShowLoading,toast=_ref.toast,setShowLogin=_ref.setShowLogin,setProgress=_ref.setProgress;var languageList=languageSelected==='EN'?english:vietnamese;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPassword=_useState2[0],setShowPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),emailLogin=_useState4[0],setEmailLogin=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),rememberMe=_useState8[0],setRememberMe=_useState8[1];var handleClickLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var account;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(emailLogin)&&password!=='')){_context.next=10;break;}if(rememberMe){document.cookie=\"email=\\\"\".concat(emailLogin,\"\\\"\");document.cookie=\"password=\\\"\".concat(password,\"\\\"\");}//create data to request server\naccount={email:emailLogin,password:password};setShowLoading(true);setProgress(70);//call api from server\n_context.next=7;return axios.post('http://localhost:8081/wetravel/login',account).then(function(res){sessionStorage.setItem('email',emailLogin);var account=res.data;sessionStorage.setItem('firstName',account.data.information.firstName);sessionStorage.setItem('lastName',account.data.information.lastName);sessionStorage.setItem('address',account.data.information.address);sessionStorage.setItem('city',account.data.information.city);sessionStorage.setItem('gender',account.data.information.gender);sessionStorage.setItem('birthdate',account.data.information.birthdate);sessionStorage.setItem('phone',account.data.information.phone);sessionStorage.setItem('rankPoint',account.data.information.rankPoint);sessionStorage.setItem('role',account.data.information.roleId);toast.success('Đăng nhập thành công');setShowLoading(false);setShowLogin(false);}).catch(function(){toast.error(languageList[5]);setShowLoading(false);});case 7:setProgress(100);_context.next=11;break;case 10:if(emailLogin===''||password===''){toast.error(languageList[10]);}case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleClickLogin(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"location\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title-login\",children:languageList[0]}),/*#__PURE__*/_jsx(\"div\",{className:\"warning-input\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"login-form\",action:\"http://localhost:8081/wetravel/login\",method:\"POST\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(HiOutlineMail,{className:\"icon-inner\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-tag\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-login\",children:[/*#__PURE__*/_jsx(\"input\",{value:emailLogin,name:\"email\",onChange:function onChange(e){return setEmailLogin(e.target.value);},type:\"text\",required:true,id:\"text\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",title:languageList[1],\"data-title\":languageList[1]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FiLock,{className:\"icon-inner\"}),showPassword?/*#__PURE__*/_jsx(AiOutlineEyeInvisible,{className:\"icon-inner icon-show-password\",onClick:function onClick(){return setShowPassword(false);}}):/*#__PURE__*/_jsx(AiOutlineEye,{className:\"icon-inner icon-show-password\",onClick:function onClick(){return setShowPassword(true);}}),/*#__PURE__*/_jsx(\"div\",{className:\"input-tag\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"field-login\",children:[/*#__PURE__*/_jsx(\"input\",{value:password,name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},type:showPassword?'text':'password',required:true,id:\"password\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",title:languageList[2],\"data-title\":languageList[2]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"remember-forgot\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-remember\",children:[/*#__PURE__*/_jsx(Checkbox,{onChange:function onChange(){return setRememberMe(!rememberMe);},id:\"remember\",sx:{'& .MuiSvgIcon-root':{fontSize:20}}}),/*#__PURE__*/_jsx(\"label\",{children:languageList[3]})]}),/*#__PURE__*/_jsx(\"div\",{onClick:handleForgotPassword,className:\"forgot-link\",children:languageList[4]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-register\",children:[/*#__PURE__*/_jsx(\"label\",{onClick:handleClickLogin,className:\"btn-login\",children:languageList[7]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ask-to-register\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"question-no-account\",children:languageList[8]}),/*#__PURE__*/_jsx(Link,{to:\"/register?role=1\",className:\"register-link\",children:languageList[9]})]})]})]})]});}export default/*#__PURE__*/memo(Login);","map":{"version":3,"names":["React","memo","useState","Link","HiOutlineMail","FiLock","AiOutlineEye","AiOutlineEyeInvisible","Checkbox","vietnamese","english","axios","Login","languageSelected","handleForgotPassword","setShowLoading","toast","setShowLogin","setProgress","languageList","showPassword","setShowPassword","emailLogin","setEmailLogin","password","setPassword","rememberMe","setRememberMe","handleClickLogin","test","document","cookie","account","email","post","then","res","sessionStorage","setItem","data","information","firstName","lastName","address","city","gender","birthdate","phone","rankPoint","roleId","success","catch","error","e","target","value","fontSize"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/pages/Login/index.js"],"sourcesContent":["import React, { memo, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport './Login.scss'\r\nimport { HiOutlineMail } from 'react-icons/hi'\r\nimport { FiLock } from 'react-icons/fi'\r\nimport { AiOutlineEye, AiOutlineEyeInvisible } from 'react-icons/ai'\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport { vietnamese, english } from '../../Languages/Login'\r\nimport axios from 'axios'\r\n\r\nfunction Login({ languageSelected, handleForgotPassword, setShowLoading, toast, setShowLogin, setProgress }) {\r\n\r\n    let languageList = (languageSelected === 'EN' ? english : vietnamese)\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [emailLogin, setEmailLogin] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [rememberMe, setRememberMe] = useState(false);\r\n\r\n    const handleClickLogin = async () => {\r\n        if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(emailLogin) && password !== '') {\r\n            if (rememberMe) {\r\n                document.cookie = `email=\"${emailLogin}\"`;\r\n                document.cookie = `password=\"${password}\"`;\r\n            }\r\n\r\n            //create data to request server\r\n            let account = {\r\n                email: emailLogin,\r\n                password: password\r\n            }\r\n\r\n            setShowLoading(true)\r\n\r\n            setProgress(70)\r\n\r\n            //call api from server\r\n            await axios.post('http://localhost:8081/wetravel/login', account)\r\n                .then((res) => {\r\n                    sessionStorage.setItem('email', emailLogin);\r\n                    const account = res.data\r\n                    sessionStorage.setItem('firstName', account.data.information.firstName)\r\n                    sessionStorage.setItem('lastName', account.data.information.lastName)\r\n                    sessionStorage.setItem('address', account.data.information.address)\r\n                    sessionStorage.setItem('city', account.data.information.city)\r\n                    sessionStorage.setItem('gender', account.data.information.gender)\r\n                    sessionStorage.setItem('birthdate', account.data.information.birthdate)\r\n                    sessionStorage.setItem('phone', account.data.information.phone)\r\n                    sessionStorage.setItem('rankPoint', account.data.information.rankPoint)\r\n                    sessionStorage.setItem('role', account.data.information.roleId)\r\n                    toast.success('Đăng nhập thành công')\r\n                    setShowLoading(false)\r\n                    setShowLogin(false)\r\n                })\r\n                .catch(() => {\r\n                    toast.error(languageList[5])\r\n                    setShowLoading(false)\r\n                })\r\n                setProgress(100)\r\n        }\r\n        else if (emailLogin === '' || password === '') {\r\n            toast.error(languageList[10])\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='location'>\r\n            <h2 className='title-login'>{languageList[0]}</h2>\r\n            <div className='warning-input'></div>\r\n            <div id='login-form' action='http://localhost:8081/wetravel/login' method='POST'>\r\n                <div>\r\n                    <HiOutlineMail className='icon-inner' />\r\n                    <div className='input-tag'>\r\n                        <div className=\"field-login\">\r\n                            <input value={emailLogin} name='email' onChange={(e) => setEmailLogin(e.target.value)} type=\"text\" required id=\"text\" />\r\n                            <label htmlFor=\"text\" title={languageList[1]} data-title={languageList[1]}></label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    <FiLock className='icon-inner' />\r\n                    {showPassword ? <AiOutlineEyeInvisible className='icon-inner icon-show-password' onClick={() => setShowPassword(false)} />\r\n                        : <AiOutlineEye className='icon-inner icon-show-password' onClick={() => setShowPassword(true)} />}\r\n                    <div className='input-tag'>\r\n                        <div className=\"field-login\">\r\n                            <input value={password} name='password' onChange={(e) => setPassword(e.target.value)} type={showPassword ? 'text' : 'password'} required id=\"password\" />\r\n                            <label htmlFor=\"password\" title={languageList[2]} data-title={languageList[2]}></label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='remember-forgot'>\r\n                    <div className='checkbox-remember'>\r\n                        <Checkbox\r\n                            onChange={() => setRememberMe(!rememberMe)}\r\n                            id='remember'\r\n                            sx={{ '& .MuiSvgIcon-root': { fontSize: 20 } }} />\r\n                        <label>{languageList[3]}</label>\r\n                    </div>\r\n\r\n                    <div onClick={handleForgotPassword} className='forgot-link'>{languageList[4]}</div>\r\n                </div>\r\n\r\n\r\n\r\n                <div className='login-register'>\r\n                    <label onClick={handleClickLogin} className='btn-login'>{languageList[7]}</label>\r\n                    <div className='ask-to-register'>\r\n                        <div className='question-no-account'>{languageList[8]}</div>\r\n                        <Link to='/register?role=1' className='register-link'>{languageList[9]}</Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default memo(Login)"],"mappings":"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"},"metadata":{},"sourceType":"module"}