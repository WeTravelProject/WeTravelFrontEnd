{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,memo}from'react';import{HiOutlineMail}from'react-icons/hi';import{AiOutlineEye,AiOutlineEyeInvisible}from'react-icons/ai';import{FiLock}from'react-icons/fi';import'./ChangePassword.scss';import LoadingDialog from'../../Layout/LoadingDialog';import axios from'axios';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import BackgroundAnimater from'../../Layout/BackgroundAnimater';import{vietnamese,english}from'../../Languages/ChangePassword';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChangePassword(_ref){var languageSelected=_ref.languageSelected,setProgress=_ref.setProgress;var languagesList=languageSelected==='EN'?english:vietnamese;var queryString=window.location.search;var urlParams=new URLSearchParams(queryString);var email=urlParams.get('email');var navigate=useNavigate();if(sessionStorage.getItem('email')!=null){email=sessionStorage.getItem('email');}var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),passwordRepeat=_useState4[0],setPasswordRepeat=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPassword=_useState6[0],setShowPassword=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPasswordRepeat=_useState8[0],setShowPasswordRepeat=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showLoading=_useState10[0],setShowLoading=_useState10[1];var handleClickResetPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var changePasswordInfor;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(password.length<6)){_context.next=4;break;}toast.warning(languagesList.warningLength);_context.next=14;break;case 4:if(!(password!=passwordRepeat)){_context.next=8;break;}toast.warning(languagesList.warningNotSame);_context.next=14;break;case 8:setShowLoading(true);setProgress(70);changePasswordInfor={email:email,password:password};//call api from server\n_context.next=13;return axios.post('http://localhost:8081/wetravel/change/password',changePasswordInfor).then(function(result){toast.success(languagesList.successChangePassword);setTimeout(navigate(\"/\"),2000);}).catch(function(){setShowLoading(false);toast.error(languagesList.errorByServer);});case 13:setProgress(100);case 14:case\"end\":return _context.stop();}}},_callee);}));return function handleClickResetPassword(){return _ref2.apply(this,arguments);};}();var handleChangeInput=function handleChangeInput(input){{input.id.includes('repeat')?setPasswordRepeat(input.value):setPassword(input.value);}var label=document.getElementById(\"\".concat(input.id,\"-label\"));if(input.value!==''){label.style.bottom='-8px';label.style.color='#4874E8';input.style.borderBottom='solid 1px #4874E8';}else{label.style.bottom='-30px';label.style.color='gray';input.style.borderBottom='solid 1px #ccc';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container change-password-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"background-animater-change-password\",children:/*#__PURE__*/_jsx(BackgroundAnimater,{})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title-change-password\",children:languagesList.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"component-change-password\",children:[/*#__PURE__*/_jsx(HiOutlineMail,{className:\"icon-mail-change-password\"}),/*#__PURE__*/_jsx(\"label\",{className:\"email-change-password\",children:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"component-change-password\",children:[/*#__PURE__*/_jsx(FiLock,{className:\"icon-lock-change-password\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newpassword\",className:\"label-change-password\",id:\"newpassword-label\",children:languagesList.labelPassword}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:function onChange(e){return handleChangeInput(e.target);},type:showPassword?'text':'password',id:\"newpassword\",name:\"newpassword\",className:\"input-change-password\"}),showPassword?/*#__PURE__*/_jsx(AiOutlineEyeInvisible,{className:\"icon-show-change-password\",onClick:function onClick(){return setShowPassword(false);}}):/*#__PURE__*/_jsx(AiOutlineEye,{className:\"icon-show-change-password\",onClick:function onClick(){return setShowPassword(true);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"component-change-password\",children:[/*#__PURE__*/_jsx(FiLock,{className:\"icon-lock-change-password\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repeat-newpassword\",className:\"label-change-password\",id:\"repeat-newpassword-label\",children:languagesList.labelPasswordConfirm}),/*#__PURE__*/_jsx(\"input\",{type:showPasswordRepeat?'text':'password',value:passwordRepeat,onChange:function onChange(e){return handleChangeInput(e.target);},id:\"repeat-newpassword\",className:\"input-change-password\"}),showPasswordRepeat?/*#__PURE__*/_jsx(AiOutlineEyeInvisible,{className:\"icon-show-change-password\",onClick:function onClick(){return setShowPasswordRepeat(false);}}):/*#__PURE__*/_jsx(AiOutlineEye,{className:\"icon-show-change-password\",onClick:function onClick(){return setShowPasswordRepeat(true);}})]}),/*#__PURE__*/_jsx(\"label\",{onClick:handleClickResetPassword,className:\"btn-reset-password\",children:languagesList.btnResetPassword}),showLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-popup\"}),/*#__PURE__*/_jsx(LoadingDialog,{})]})]});}export default/*#__PURE__*/memo(ChangePassword);","map":{"version":3,"names":["useState","memo","HiOutlineMail","AiOutlineEye","AiOutlineEyeInvisible","FiLock","LoadingDialog","axios","useNavigate","toast","BackgroundAnimater","vietnamese","english","ChangePassword","languageSelected","setProgress","languagesList","queryString","window","location","search","urlParams","URLSearchParams","email","get","navigate","sessionStorage","getItem","password","setPassword","passwordRepeat","setPasswordRepeat","showPassword","setShowPassword","showPasswordRepeat","setShowPasswordRepeat","showLoading","setShowLoading","handleClickResetPassword","length","warning","warningLength","warningNotSame","changePasswordInfor","post","then","result","success","successChangePassword","setTimeout","catch","error","errorByServer","handleChangeInput","input","id","includes","value","label","document","getElementById","style","bottom","color","borderBottom","title","labelPassword","e","target","labelPasswordConfirm","btnResetPassword"],"sources":["C:/Users/ADMIN/Desktop/Hoc ReactJS/wetravelfrontend/src/components/pages/ChangePassword/index.js"],"sourcesContent":["import { useState, memo } from 'react'\r\nimport { HiOutlineMail } from 'react-icons/hi'\r\nimport { AiOutlineEye, AiOutlineEyeInvisible } from 'react-icons/ai'\r\nimport { FiLock } from 'react-icons/fi'\r\nimport './ChangePassword.scss'\r\nimport LoadingDialog from '../../Layout/LoadingDialog'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport BackgroundAnimater from '../../Layout/BackgroundAnimater'\r\nimport { vietnamese, english } from '../../Languages/ChangePassword'\r\n\r\nfunction ChangePassword({ languageSelected, setProgress}) {\r\n    let languagesList = (languageSelected === 'EN' ? english : vietnamese)\r\n\r\n    const queryString = window.location.search;\r\n    const urlParams = new URLSearchParams(queryString);\r\n    let email = urlParams.get('email')\r\n\r\n    const navigate = useNavigate()\r\n\r\n    if (sessionStorage.getItem('email') != null) {\r\n        email = sessionStorage.getItem('email')\r\n    }\r\n\r\n    const [password, setPassword] = useState('')\r\n    const [passwordRepeat, setPasswordRepeat] = useState('')\r\n    const [showPassword, setShowPassword] = useState(false)\r\n    const [showPasswordRepeat, setShowPasswordRepeat] = useState(false)\r\n    const [showLoading, setShowLoading] = useState(false)\r\n\r\n    const handleClickResetPassword = async () => {\r\n        if (password.length < 6) {\r\n            toast.warning(languagesList.warningLength)\r\n        }\r\n        else if (password != passwordRepeat) {\r\n            toast.warning(languagesList.warningNotSame)\r\n        }\r\n        else {\r\n            setShowLoading(true)\r\n            setProgress(70)\r\n            let changePasswordInfor = {\r\n                email: email,\r\n                password: password,\r\n            }\r\n\r\n            //call api from server\r\n            await axios.post('http://localhost:8081/wetravel/change/password', changePasswordInfor).then((result) => {\r\n                toast.success(languagesList.successChangePassword)\r\n                setTimeout(navigate(`/`), 2000)\r\n            }).catch(() => {\r\n                setShowLoading(false)\r\n                toast.error(languagesList.errorByServer);\r\n            })\r\n            setProgress(100)\r\n        }\r\n    }\r\n\r\n    const handleChangeInput = (input) => {\r\n        { input.id.includes('repeat') ? setPasswordRepeat(input.value) : setPassword(input.value) }\r\n        const label = document.getElementById(`${input.id}-label`);\r\n        if (input.value !== '') {\r\n            label.style.bottom = '-8px'\r\n            label.style.color = '#4874E8'\r\n            input.style.borderBottom = 'solid 1px #4874E8'\r\n        }\r\n        else {\r\n            label.style.bottom = '-30px'\r\n            label.style.color = 'gray'\r\n            input.style.borderBottom = 'solid 1px #ccc'\r\n        }\r\n    }\r\n\r\n    return (<div className='container change-password-container'>\r\n        <div className='background-animater-change-password'><BackgroundAnimater /></div>\r\n        <h1 className='title-change-password'>{languagesList.title}</h1>\r\n        <div className='component-change-password'>\r\n            <HiOutlineMail className='icon-mail-change-password' />\r\n            <label className='email-change-password'>{email}</label>\r\n        </div>\r\n        <div className='component-change-password'>\r\n            <FiLock className='icon-lock-change-password' />\r\n            <label htmlFor='newpassword' className='label-change-password' id='newpassword-label'>{languagesList.labelPassword}</label>\r\n            <input value={password}\r\n                onChange={(e) => handleChangeInput(e.target)}\r\n                type={showPassword ? 'text' : 'password'}\r\n                id='newpassword'\r\n                name='newpassword'\r\n                className='input-change-password' />\r\n            {showPassword ? <AiOutlineEyeInvisible className='icon-show-change-password' onClick={() => setShowPassword(false)} /> : <AiOutlineEye className='icon-show-change-password' onClick={() => setShowPassword(true)} />}\r\n        </div>\r\n        <div className='component-change-password'>\r\n            <FiLock className='icon-lock-change-password' />\r\n            <label htmlFor='repeat-newpassword' className='label-change-password' id='repeat-newpassword-label'>{languagesList.labelPasswordConfirm}</label>\r\n            <input\r\n                type={showPasswordRepeat ? 'text' : 'password'}\r\n                value={passwordRepeat}\r\n                onChange={(e) => handleChangeInput(e.target)}\r\n                id='repeat-newpassword'\r\n                className='input-change-password' />\r\n            {showPasswordRepeat ? <AiOutlineEyeInvisible className='icon-show-change-password' onClick={() => setShowPasswordRepeat(false)} /> : <AiOutlineEye className='icon-show-change-password' onClick={() => setShowPasswordRepeat(true)} />}\r\n        </div>\r\n        <label onClick={handleClickResetPassword} className='btn-reset-password'>{languagesList.btnResetPassword}</label>\r\n        {showLoading && <div className='popup'>\r\n            <div className='bg-popup' />\r\n            <LoadingDialog />\r\n        </div>}\r\n    </div>)\r\n}\r\n\r\nexport default memo(ChangePassword)"],"mappings":"2aAAA,OAASA,QAAT,CAAmBC,IAAnB,KAA+B,OAA/B,CACA,OAASC,aAAT,KAA8B,gBAA9B,CACA,OAASC,YAAT,CAAuBC,qBAAvB,KAAoD,gBAApD,CACA,OAASC,MAAT,KAAuB,gBAAvB,CACA,MAAO,uBAAP,CACA,MAAOC,cAAP,KAA0B,4BAA1B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,mBAAP,KAA+B,iCAA/B,CACA,OAASC,UAAT,CAAqBC,OAArB,KAAoC,gCAApC,C,wFAEA,QAASC,eAAT,MAA0D,IAAhCC,iBAAgC,MAAhCA,gBAAgC,CAAdC,WAAc,MAAdA,WAAc,CACtD,GAAIC,cAAa,CAAIF,gBAAgB,GAAK,IAArB,CAA4BF,OAA5B,CAAsCD,UAA3D,CAEA,GAAMM,YAAW,CAAGC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CACA,GAAMC,UAAS,CAAG,GAAIC,gBAAJ,CAAoBL,WAApB,CAAlB,CACA,GAAIM,MAAK,CAAGF,SAAS,CAACG,GAAV,CAAc,OAAd,CAAZ,CAEA,GAAMC,SAAQ,CAAGjB,WAAW,EAA5B,CAEA,GAAIkB,cAAc,CAACC,OAAf,CAAuB,OAAvB,GAAmC,IAAvC,CAA6C,CACzCJ,KAAK,CAAGG,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAR,CACH,CAED,cAAgC3B,QAAQ,CAAC,EAAD,CAAxC,wCAAO4B,QAAP,eAAiBC,WAAjB,eACA,eAA4C7B,QAAQ,CAAC,EAAD,CAApD,yCAAO8B,cAAP,eAAuBC,iBAAvB,eACA,eAAwC/B,QAAQ,CAAC,KAAD,CAAhD,yCAAOgC,YAAP,eAAqBC,eAArB,eACA,eAAoDjC,QAAQ,CAAC,KAAD,CAA5D,yCAAOkC,kBAAP,eAA2BC,qBAA3B,eACA,eAAsCnC,QAAQ,CAAC,KAAD,CAA9C,0CAAOoC,WAAP,gBAAoBC,cAApB,gBAEA,GAAMC,yBAAwB,6FAAG,kKACzBV,QAAQ,CAACW,MAAT,CAAkB,CADO,0BAEzB9B,KAAK,CAAC+B,OAAN,CAAcxB,aAAa,CAACyB,aAA5B,EAFyB,mCAIpBb,QAAQ,EAAIE,cAJQ,0BAKzBrB,KAAK,CAAC+B,OAAN,CAAcxB,aAAa,CAAC0B,cAA5B,EALyB,8BAQzBL,cAAc,CAAC,IAAD,CAAd,CACAtB,WAAW,CAAC,EAAD,CAAX,CACI4B,mBAVqB,CAUC,CACtBpB,KAAK,CAAEA,KADe,CAEtBK,QAAQ,CAAEA,QAFY,CAVD,CAezB;AAfyB,uBAgBnBrB,MAAK,CAACqC,IAAN,CAAW,gDAAX,CAA6DD,mBAA7D,EAAkFE,IAAlF,CAAuF,SAACC,MAAD,CAAY,CACrGrC,KAAK,CAACsC,OAAN,CAAc/B,aAAa,CAACgC,qBAA5B,EACAC,UAAU,CAACxB,QAAQ,KAAT,CAAgB,IAAhB,CAAV,CACH,CAHK,EAGHyB,KAHG,CAGG,UAAM,CACXb,cAAc,CAAC,KAAD,CAAd,CACA5B,KAAK,CAAC0C,KAAN,CAAYnC,aAAa,CAACoC,aAA1B,EACH,CANK,CAhBmB,SAuBzBrC,WAAW,CAAC,GAAD,CAAX,CAvByB,uDAAH,kBAAxBuB,yBAAwB,2CAA9B,CA2BA,GAAMe,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,KAAD,CAAW,CACjC,CAAEA,KAAK,CAACC,EAAN,CAASC,QAAT,CAAkB,QAAlB,EAA8BzB,iBAAiB,CAACuB,KAAK,CAACG,KAAP,CAA/C,CAA+D5B,WAAW,CAACyB,KAAK,CAACG,KAAP,CAA1E,CAAyF,CAC3F,GAAMC,MAAK,CAAGC,QAAQ,CAACC,cAAT,WAA2BN,KAAK,CAACC,EAAjC,WAAd,CACA,GAAID,KAAK,CAACG,KAAN,GAAgB,EAApB,CAAwB,CACpBC,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAqB,MAArB,CACAJ,KAAK,CAACG,KAAN,CAAYE,KAAZ,CAAoB,SAApB,CACAT,KAAK,CAACO,KAAN,CAAYG,YAAZ,CAA2B,mBAA3B,CACH,CAJD,IAKK,CACDN,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAqB,OAArB,CACAJ,KAAK,CAACG,KAAN,CAAYE,KAAZ,CAAoB,MAApB,CACAT,KAAK,CAACO,KAAN,CAAYG,YAAZ,CAA2B,gBAA3B,CACH,CACJ,CAbD,CAeA,mBAAQ,aAAK,SAAS,CAAC,qCAAf,wBACJ,YAAK,SAAS,CAAC,qCAAf,uBAAqD,KAAC,kBAAD,IAArD,EADI,cAEJ,WAAI,SAAS,CAAC,uBAAd,UAAuChD,aAAa,CAACiD,KAArD,EAFI,cAGJ,aAAK,SAAS,CAAC,2BAAf,wBACI,KAAC,aAAD,EAAe,SAAS,CAAC,2BAAzB,EADJ,cAEI,cAAO,SAAS,CAAC,uBAAjB,UAA0C1C,KAA1C,EAFJ,GAHI,cAOJ,aAAK,SAAS,CAAC,2BAAf,wBACI,KAAC,MAAD,EAAQ,SAAS,CAAC,2BAAlB,EADJ,cAEI,cAAO,OAAO,CAAC,aAAf,CAA6B,SAAS,CAAC,uBAAvC,CAA+D,EAAE,CAAC,mBAAlE,UAAuFP,aAAa,CAACkD,aAArG,EAFJ,cAGI,cAAO,KAAK,CAAEtC,QAAd,CACI,QAAQ,CAAE,kBAACuC,CAAD,QAAOd,kBAAiB,CAACc,CAAC,CAACC,MAAH,CAAxB,EADd,CAEI,IAAI,CAAEpC,YAAY,CAAG,MAAH,CAAY,UAFlC,CAGI,EAAE,CAAC,aAHP,CAII,IAAI,CAAC,aAJT,CAKI,SAAS,CAAC,uBALd,EAHJ,CASKA,YAAY,cAAG,KAAC,qBAAD,EAAuB,SAAS,CAAC,2BAAjC,CAA6D,OAAO,CAAE,yBAAMC,gBAAe,CAAC,KAAD,CAArB,EAAtE,EAAH,cAA4G,KAAC,YAAD,EAAc,SAAS,CAAC,2BAAxB,CAAoD,OAAO,CAAE,yBAAMA,gBAAe,CAAC,IAAD,CAArB,EAA7D,EAT7H,GAPI,cAkBJ,aAAK,SAAS,CAAC,2BAAf,wBACI,KAAC,MAAD,EAAQ,SAAS,CAAC,2BAAlB,EADJ,cAEI,cAAO,OAAO,CAAC,oBAAf,CAAoC,SAAS,CAAC,uBAA9C,CAAsE,EAAE,CAAC,0BAAzE,UAAqGjB,aAAa,CAACqD,oBAAnH,EAFJ,cAGI,cACI,IAAI,CAAEnC,kBAAkB,CAAG,MAAH,CAAY,UADxC,CAEI,KAAK,CAAEJ,cAFX,CAGI,QAAQ,CAAE,kBAACqC,CAAD,QAAOd,kBAAiB,CAACc,CAAC,CAACC,MAAH,CAAxB,EAHd,CAII,EAAE,CAAC,oBAJP,CAKI,SAAS,CAAC,uBALd,EAHJ,CASKlC,kBAAkB,cAAG,KAAC,qBAAD,EAAuB,SAAS,CAAC,2BAAjC,CAA6D,OAAO,CAAE,yBAAMC,sBAAqB,CAAC,KAAD,CAA3B,EAAtE,EAAH,cAAkH,KAAC,YAAD,EAAc,SAAS,CAAC,2BAAxB,CAAoD,OAAO,CAAE,yBAAMA,sBAAqB,CAAC,IAAD,CAA3B,EAA7D,EATzI,GAlBI,cA6BJ,cAAO,OAAO,CAAEG,wBAAhB,CAA0C,SAAS,CAAC,oBAApD,UAA0EtB,aAAa,CAACsD,gBAAxF,EA7BI,CA8BHlC,WAAW,eAAI,aAAK,SAAS,CAAC,OAAf,wBACZ,YAAK,SAAS,CAAC,UAAf,EADY,cAEZ,KAAC,aAAD,IAFY,GA9BZ,GAAR,CAmCH,CAED,2BAAenC,IAAI,CAACY,cAAD,CAAnB"},"metadata":{},"sourceType":"module"}